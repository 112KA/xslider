{"version":3,"sources":["webpack://xslider/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://xslider/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://xslider/./node_modules/@babel/runtime/helpers/createClass.js","webpack://xslider/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://xslider/./node_modules/@babel/runtime/helpers/get.js","webpack://xslider/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://xslider/./node_modules/@babel/runtime/helpers/inherits.js","webpack://xslider/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://xslider/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://xslider/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://xslider/./node_modules/@babel/runtime/helpers/typeof.js","webpack://xslider/./src/modules/SlideController.js","webpack://xslider/./src/modules/components/AutoPlay.js","webpack://xslider/./src/modules/components/Data.js","webpack://xslider/./src/modules/components/Indexer.js","webpack://xslider/./src/modules/components/Net.js","webpack://xslider/./src/modules/components/Option.js","webpack://xslider/./src/modules/components/Utils.js","webpack://xslider/./src/modules/components/converter/Cloner.js","webpack://xslider/./src/modules/components/converter/Inliner.js","webpack://xslider/./src/modules/components/converter/SvgConverter.js","webpack://xslider/./src/modules/components/graphics/GLGraphics.js","webpack://xslider/./src/modules/components/graphics/Material.js","webpack://xslider/./src/modules/components/graphics/Mesh.js","webpack://xslider/./src/modules/components/graphics/assets/Asset.js","webpack://xslider/./src/modules/components/graphics/assets/Buffer.js","webpack://xslider/./src/modules/components/graphics/assets/Program.js","webpack://xslider/./src/modules/components/graphics/assets/Texture.js","webpack://xslider/./src/modules/components/graphics/nodes/Node.js","webpack://xslider/./src/modules/components/graphics/nodes/Scene.js","webpack://xslider/./src/modules/core/Environment.js","webpack://xslider/./src/modules/core/Event.js","webpack://xslider/./src/modules/core/EventDispatcher.js","webpack://xslider/./src/modules/core/InteractiveObject.js","webpack://xslider/./src/modules/core/Stage.js","webpack://xslider/./src/modules/core/Ticker.js","webpack://xslider/./src/modules/display/Button.js","webpack://xslider/./src/modules/display/Dom.js","webpack://xslider/./src/modules/display/Pager.js","webpack://xslider/./src/modules/display/Slide.js","webpack://xslider/./src/modules/display/UI.js","webpack://xslider/./src/modules/display/XModel.js","webpack://xslider/./src/modules/geom/Color.js","webpack://xslider/./src/modules/geom/Matrix.js","webpack://xslider/./src/modules/geom/Vec.js","webpack://xslider/./src/modules/main.js","webpack://xslider/./src/modules/renderer/BaseRenderer.js","webpack://xslider/./src/modules/renderer/DefaultRenderer.js","webpack://xslider/./src/modules/renderer/XRenderer.js","webpack://xslider/./src/modules/transitions/BaseTransition.js","webpack://xslider/./src/modules/transitions/CrossWarpTransition.js","webpack://xslider/./src/modules/transitions/CrossZoomTransition.js","webpack://xslider/./src/modules/transitions/CubeTransition.js","webpack://xslider/./src/modules/transitions/MorphTransition.js","webpack://xslider/./src/modules/transitions/NoiseTransition.js","webpack://xslider/./src/modules/transitions/PixelateTransition.js","webpack://xslider/./src/modules/transitions/PixelateWipeTransition.js","webpack://xslider/./src/xslider.scss?407c","webpack://xslider/webpack/bootstrap","webpack://xslider/webpack/runtime/compat get default export","webpack://xslider/webpack/runtime/define property getters","webpack://xslider/webpack/runtime/global","webpack://xslider/webpack/runtime/hasOwnProperty shorthand","webpack://xslider/webpack/runtime/make namespace object","webpack://xslider/./src/xslider.js"],"names":["SlideController","indexer","Indexer","renderer","DefaultRenderer","gl","undefined","ui","UI","autoplay","AutoPlay","container","SlideContainer","_defineHandlers","_onResize","e","w","dom","width","h","height","data","list","forEach","slide","needsResize","resize","then","render","_onCompleteSlide","stage","_onTick","option","get","on","TouchEvent","_onChange","start","time","tick","ready","message","console","log","pager","set","index","current","type","prev","next","to","value","active","off","down","stop","dx","clientX","clientX0","move","up","setup","getRenderer","mesh","loop","Inliner","dispose","EventDispatcher","_on","delay","dispatch","EVENT","TICK","enabled","Data","Dom","Utils","Option","debug","classList","add","slides","element","push","Slide","XRenderer","_target","initialSlideIndex","_v","_length","length","_state","STATE","DEFAULT","progress","constrain","d0","d1","diff","DOWN","_move","v","UP","Math","round","_i0","_i1","ret","complete","abs","easing","floor","i1","ceil","Net","WOFF","JPEG","mimes","image","src","Promise","resolve","reject","check","setTimeout","url","responseType","onChange","xhr","readyState","status","response","onTimeout","XMLHttpRequest","onreadystatechange","ontimeout","timeout","open","send","ext","parseExtension","blob","readBlob","bind","match","exec","reader","FileReader","mimeType","onloadend","result","split","readAsDataURL","net","selector","touchMove","throwable","transition","BaseTransition","property","module","Debug","DISPLAY","DOM","SVG","IMG","extend","base","o","Object","assign","entries","entry","delegate","clamp","min","max","getQuery","key","cached","_query","query","window","location","search","substring","parameters","i","paramName","decodeURIComponent","paramValue","Cloner","original","target","excludes","name","getPropertyValue","cssText","setProperty","getPropertyPriority","getOwnPropertyNames","clone","cloneNode","Element","copyStyle","getComputedStyle","style","hasChildNodes","children","childNodes","arr","child","p","childClone","insertChildAtIndex","all","parent","appendChild","insertBefore","cloneStyle","cloner","URL_REGEX","resolveFonts","inlinedFontString","fontStrings","readFontRules","map","rule","inlineFonts","inlinedFontStrings","join","fontRules","document","styleSheets","j","ss","cssRules","CSSRule","FONT_FACE_RULE","string","_inline","inlineNode","node","inlineImage","urls","searchUrls","dataURI","replace","filter","isDataURI","inlineImageElement","inlineBackgroundImage","HTMLImageElement","onload","onerror","background","inlined","converter","parser","DOMParser","convert","setAttribute","svgString","svg","parseFromString","styleNode","createElement","createTextNode","getElementsByTagName","GraphicsContext","bound","sceneContext","program","viewport","Vec4","test","depth","stensil","reset","GLGraphics","canvas","params","alpha","premultipliedAlpha","_gl","getContext","context","updateTexture","texture","textureUnit","createTexture","activeTexture","bindTexture","TEXTURE_2D","needsUpdate","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","deleteTexture","updateProgram","createProgram","updateShader","vertex","attachShader","fragment","linkProgram","deleteShader","getProgramParameter","LINK_STATUS","Error","useProgram","update","attributes","updateAttribute","stride","uniforms","updateUniform","uniformBuffer","deleteProgram","shader","createShader","shaderSource","source","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","attribute","a","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","size","format","FALSE","offset","buffer","uniform","getUniformLocation","Uniform","uniformMatrix4fv","model","matrix","local","camera","projection","valueObject","Texture","uniform1i","shaderVarFormat","ShaderVarFormat","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","updateBuffer","createBuffer","bufferType","Buffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","bindBuffer","bufferData","usage","updateSceneContext","enable","DEPTH_TEST","disable","stencil","STENCIL_TEST","updateCamera","equals","x","y","z","clear","c","bits","color","clearColor","r","g","b","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","renderModel","scene","renderMesh","mat","vertexBuffer","material","bf","indexBuffer","drawElements","drawMode","limit","Material","Program","updateSource","vertexShader","fragmentShader","textureCount","keys","addUniform","Mesh","VarFormat","IndexBuffer","Asset","Byte","UnsignedByte","Short","UnsignedShort","Int","UnsignedInt","Float","getTypedArrayByFormat","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","position","subarray","Array","tmp","Usage","Static","Dynamic","Stream","Type","Interleaved","Index","DrawMode","Triangles","Vector2","Vector3","Vector4","Matrix3","Matrix4","getSizeFromShaderVarFormat","ShaderVar","varFormat","constructor","Vec2","Vec3","Binding","Projection","ModelView","Shader","VERTEX","FRAGMENT","bytes_per_float","Image","Node","indexOf","splice","Model","Camera","SceneContext","Color","Scene3D","removeChild","Environment","info","XSLIDER_VERSION","support","touch","DocumentTouch","pointer","navigator","pointerEnabled","MSPointer","msPointerEnabled","env","Event","CHANGE","types","START","MOVE","END","_listeners","_properties","properties","v0","value0","options","hasOwnProperty","listener","some","elem","InteractiveObject","changeTarget","bubble","_autoRemoveListener","touches","clientY","clientY0","touchStart","_autoAddListener","addEventListener","removeEventListener","Stage","ticker","Ticker","loaded","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","fps","_defineFunctions","prefixes","requestAnimationFrame","cancelAnimationFrame","_tickHandler","_requestId","_lastMs","overlap","_nextMs","t0","_gap","_startMs","dt","_fps","Date","now","getTime","TweenMaxTicker","Button","flag","remove","_width","_height","querySelector","view","querySelectorAll","Pager","_onClick","_onChangeIndex","span","layer","inlinedNode","XMLSerializer","serializeToString","uri","encodeURIComponent","_svg0","replaceChild","EXCLUDES","loadSvg","clearRect","drawImage","_onChangeSlide","removeOld","updateSlide","slide0","i0","slide1","resolution","slideIndex","_onPrev","preventDefault","PREV","_onNext","NEXT","_offPrev","XMaterial","addAttribute","XModel","vertices","allocate","put","indices","identity","dst","sx","sy","s","sin","cos","fov","aspect","near","far","n2","PI","nf","T","tan","B","L","R","rx","ry","rz","sz","sinX","cosX","sinY","cosY","sinZ","cosZ","sinYsinX","sinYcosX","XSlider","controller","BaseRenderer","GLRenderer","_onUpdateTexture","webkitTransform","opacity","addChild","_uniform0","texture0","texture1","setViewport","gradient","CrossWarpTransition","CrossZoomTransition","strength","CubeTransition","bgColor","unzoom","floating","perspective","reflection","MorphTransition","NoiseTransition","zoom","dark_low","dark_high","PixelateTransition","PixelateWipeTransition","global"],"mappings":"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","file":"dist/xslider.js","sourcesContent":["function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","\nimport {TouchEvent} from './core/Event'\nimport {EventDispatcher} from './core/EventDispatcher'\nimport {stage} from './core/Stage'\nimport {AutoPlay} from './components/AutoPlay'\nimport {Indexer} from './components/Indexer'\nimport {Inliner} from './components/converter/Inliner'\n// import {Bench} from './components/debug/Bench'\nimport {SlideContainer} from './display/Slide'\nimport {UI} from './display/UI'\nimport {DefaultRenderer} from './renderer/DefaultRenderer'\n\n\n\nexport class SlideController extends EventDispatcher {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.indexer = new Indexer();\n\n\t\tthis.renderer = {\n\t\t\tdefault : new DefaultRenderer()\n\t\t\t, gl : undefined\n\t\t};\n\n\t\tthis.ui = new UI();\n\t\tthis.autoplay = new AutoPlay();\n\n\t\tthis.container = new SlideContainer();\n\n\t\tthis._defineHandlers();\n\t}\n\n\t_defineHandlers() {\n\n\t\tthis._onResize = (e) => {\n\t\t\tconst w = this.dom.width, h = this.dom.height;\n\n\t\t\tthis.data.list.forEach((slide) => {\n\t\t\t\tslide.needsResize = true;\n\t\t\t});\n\n\t\t\tthis.renderer.default.resize(w, h);\n\t\t\tthis.renderer.gl.resize(w, h);\n\n\t\t\treturn this.container.resize(w, h).then(() => {\n\t\t\t\tthis.renderer.gl.render(this.indexer);\n\t\t\t});\n\t\t}\n\n\n\t\tthis._onCompleteSlide = () => {\n\t\t\tstage.off('tick', this._onTick);\n\t\t\tthis.data.option.get('touchMove') && this.ui.on(TouchEvent.START, this._onChange);\n\t\t\tthis.ui.on('index', this._onChange);\n\n\t\t\tthis.autoplay.start();\n\t\t}\n\n\n\t\tthis._onTick = (e) => {\n\t\t\tthis.data.time = e.time;\n\t\t\tthis.indexer.tick();\n\t\t\tthis.renderer.default.render(this.indexer);\n\t\t\tthis.container.ready(this.indexer)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.renderer.gl.render(this.indexer);\n\t\t\t\t},\n\t\t\t\t(message) => {\n\t\t\t\t\tconsole.log(\"reject ::\", message);\n\t\t\t\t});\n\t\t\tthis.ui.pager.set({index:this.indexer.current});\n\t\t}\n\n\n\t\tthis._onChange = (e) => {\n\t\t\tswitch(e.type) {\n\t\t\t\tcase UI.EVENT.PREV:\n\t\t\t\t\tthis.prev();\n\t\t\t\tbreak;\n\n\t\t\t\tcase UI.EVENT.NEXT:\n\t\t\t\tcase AutoPlay.EVENT.TICK:\n\t\t\t\t\tthis.next();\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'index':\n\t\t\t\t\tthis.indexer.to(e.value);\n\n\t\t\t\t\tthis.container.ready(this.indexer).then(() => {\n\t\t\t\t\t\tstage.on('tick', this._onTick);\n\t\t\t\t\t},\n\t\t\t\t\t(message) => {\n\t\t\t\t\t\tconsole.log('on index rejected : ', message);\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'head':\n\t\t\t\t\tthis.ui.prev && (this.ui.prev.active = !this.indexer.get('head'));\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'tail':\n\t\t\t\t\tthis.ui.next && (this.ui.next.active = !this.indexer.get('tail'));\n\t\t\t\tbreak;\n\n\t\t\t\tcase TouchEvent.START:\n\t\t\t\t\tstage.on(TouchEvent.MOVE, this._onChange);\n\t\t\t\t\tstage.on(TouchEvent.END, this._onChange);\n\n\t\t\t\t\tthis.ui.off('index', this._onChange);\n\n\t\t\t\t\tthis.indexer.down();\n\n\t\t\t\t\tthis.autoplay.stop();\n\n\t\t\t\t\tstage.on('tick', this._onTick);\n\t\t\t\tbreak;\n\n\t\t\t\tcase TouchEvent.MOVE:\n\t\t\t\t\tconst dx = (e.clientX - e.clientX0) / this.dom.width;\n\t\t\t\t\tthis.indexer.move(-dx);\n\t\t\t\tbreak;\n\n\t\t\t\tcase TouchEvent.END:\n\t\t\t\t\tstage.off(TouchEvent.MOVE, this._onChange);\n\t\t\t\t\tstage.off(TouchEvent.END, this._onChange);\n\n\t\t\t\t\tthis.indexer.up();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsetup(renderer, data) {\n\t\tthis.renderer.gl = renderer;\n\n\t\tthis.data = data;\n\t\tthis.dom = data.dom;\n\n\t\tthis.renderer.default.setup(this.data);\n\n\t\tthis.renderer.gl = this.data.getRenderer();\n\t\tthis.renderer.gl.setup(this.data, this.container);\n\n\t\tthis.container.setup(this.renderer.gl.mesh);\n\n\t\tthis.ui.setup(this.data);\n\n\t\tthis.indexer.setup(this.data);\n\t\tthis.indexer.on('complete', this._onCompleteSlide);\n\t\tif(!this.data.option.loop) {\n\t\t\tthis.indexer.on('head', this._onChange);\n\t\t\tthis.indexer.on('tail', this._onChange);\n\t\t}\n\n\t\tthis.autoplay.on(AutoPlay.EVENT.TICK, this._onChange);\n\t\tthis.autoplay.setup(this.data.option.autoplay);\n\n\t\tthis.dom.on('resize', this._onResize);\n\n\t\tInliner.resolveFonts()\n\t\t.then(() => this.container.ready(this.indexer))\n\t\t.then(this._onResize)\n\t\t.then(() => {\n\n\t\t\tthis.ui.on('index', this._onChange);\n\t\t\tthis.ui.on(UI.EVENT.PREV, this._onChange);\n\t\t\tthis.ui.on(UI.EVENT.NEXT, this._onChange);\n\n\t\t\tthis.data.option.get('touchMove') && this.ui.on(TouchEvent.START, this._onChange);\n\n\t\t\tthis.autoplay.start();\n\n\t\t\tstage.on('tick', this._onTick);\n\n\t\t}, (message) => {\n\t\t\tconsole.log(\"first ready rejected : \", message);\n\t\t});\n\t}\n\n\n\tprev() {\n\t\tthis.data.option.get('touchMove') && this.ui.off(TouchEvent.START, this._onChange);\n\t\tthis.autoplay.stop();\n\t\tthis.indexer.prev();\n\t\tthis.ui.pager.set({index:this.indexer.current});\n\t}\n\n\n\tnext() {\n\t\tthis.data.option.get('touchMove') && this.ui.off(TouchEvent.START, this._onChange);\n\t\tthis.autoplay.stop();\n\t\tthis.indexer.next();\n\t\tthis.ui.pager.set({index:this.indexer.current});\n\t}\n\n\n\tdispose() {\n\n\t\tif(!this.data) return;\n\n\t\tstage.off('tick', this._onTick);\n\t\tstage.off(TouchEvent.MOVE, this._onChange);\n\t\tstage.off(TouchEvent.END, this._onChange);\n\n\t\tthis.ui.off('index', this._onChange);\n\t\tthis.ui.off(UI.EVENT.PREV, this._onChange);\n\t\tthis.ui.off(UI.EVENT.NEXT, this._onChange);\n\n\t\tthis.data.option.get('touchMove') && this.ui.off(TouchEvent.START, this._onChange);\n\n\t\tthis.ui.dispose();\n\n\t\tthis.dom.off('resize', this._onResize);\n\n\t\tthis.indexer.off('complete', this._onCompleteSlide);\n\n\t\tif(!this.data.option.loop) {\n\t\t\tthis.indexer.off('head', this._onChange);\n\t\t\tthis.indexer.off('tail', this._onChange);\n\t\t}\n\n\t\tthis.renderer.gl.dispose();\n\t\tthis.renderer.default.dispose();\n\n\t\tthis.container.dispose();\n\n\t\tthis.data = undefined;\n\t}\n}\n\n","import {EventDispatcher} from '../core/EventDispatcher'\nimport {stage} from '../core/Stage'\n\nexport class AutoPlay extends EventDispatcher {\n    constructor() {\n        super();\n\n\t\tthis._defineHandlers();\n    }\n\n\n\t_defineHandlers() {\n        this._on = {\n            tick : (e) => {\n                if(e.time > this.option.delay) {\n                    this.dispatch(AutoPlay.EVENT.TICK);\n                }\n            }\n        }\n    }\n\n\n    get enabled() {\n        return this.option != undefined;\n    }\n    \n\n    setup(option) {\n        this.option = option;\n    }\n\n\n    start() {\n        if(this.enabled) {\n            stage.on('tick', this._on.tick);\n        }\n    }\n\n\n    stop() {\n        if(this.enabled) {\n            stage.off('tick', this._on.tick);\n        }\n    }\n\n\n}\n\nAutoPlay.EVENT = {\n    TICK:\"autoplay_tick\"\n}","import { Option } from './Option'\nimport { Utils } from './Utils'\nimport { Dom } from '../display/Dom'\nimport { Slide } from '../display/Slide'\nimport { DefaultRenderer } from '../renderer/DefaultRenderer'\n// import {ThreeRenderer} from '../renderer/ThreeRenderer'\nimport { XRenderer } from '../renderer/XRenderer'\n\n\n\n\nexport class Data {\n\tconstructor() {\n\t\tthis.dom = new Dom();\n\t\tthis.time = 0;\n\t}\n\n\tsetup(...args) {\n\n\t\tthis.option = Utils.extend(Option, args[1] || {});\n\n\t\tthis.dom.setup(args[0]);\n\n\t\tif (this.option.debug == Option.Debug.DISPLAY.DOM) {\n\t\t\tthis.dom.container.classList.add(\"xslider-debug\");\n\t\t}\n\n\t\tthis.list = [];\n\n\t\tthis.dom.slides.forEach(element => {\n\t\t\tthis.list.push(new Slide(element, this.option.debug));\n\t\t})\n\t}\n\n\tdispose() {\n\t\tif (!this.option) return;\n\n\t\tthis.list.forEach(slide => {\n\t\t\tslide.dispose();\n\t\t})\n\t\tthis.dom.dispose();\n\n\t\tthis.option = undefined;\n\t}\n\n\tgetRenderer() {\n\t\tif (this.option.debug) {\n\t\t\treturn new DefaultRenderer();\n\t\t}\n\t\telse {\n\t\t\t// return this.option.renderer || new ThreeRenderer();\n\t\t\treturn this.option.renderer || new XRenderer();\n\t\t}\n\t}\n}","import {EventDispatcher} from '../core/EventDispatcher'\n\nexport class Indexer extends EventDispatcher {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tsetup(data) {\n\t\tthis.data = data;\n\n\t\tthis._target = data.option.initialSlideIndex;\n\t\tthis._v = this._target-1;\n\t\tthis._length = data.dom.slides.length;\n\n\t\tthis._state = Indexer.STATE.DEFAULT;\n\n\t\tthis.progress = 0;\n\n\n\t\tthis.set({\n\t\t\t'head':undefined,\n\t\t\t'tail':undefined\n\t\t});\n\t\t!this.data.option.loop && (this._target = this.constrain(this._target));\n\n\t\tthis.tick();\n\t}\n\n\tprev() {\n\t\tthis._target--;\n\n\t\t!this.data.option.loop && (this._target = this.constrain(this._target));\n\t}\n\n\tnext() {\n\t\tthis._target++;\n\n\t\t!this.data.option.loop && (this._target = this.constrain(this._target));\n\t}\n\n\tto(index) {\n\t\tif(this.data.option.loop) {\n\t\t\tlet d0 = index - this.current, d1, diff;\n\n\t\t\tif(d0 > 0) {\n\t\t\t\td1 = d0 - this._length;\n\t\t\t\tdiff = d0 > -d1 ? d1 : d0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\td1 = d0 + this._length;\n\t\t\t\tdiff = -d0 > d1 ? d1 : d0;\n\t\t\t}\n\n\t\t\tthis._target += diff;\n\t\t}\n\t\telse {\n\t\t\tthis._target = index;\n\t\t}\n\t}\n\n\tdown() {\n\t\tthis._state = Indexer.STATE.DOWN;\n\t\tthis._move = 0;\n\t}\n\n\tmove(v) {\n\t\tthis._v+=v;\n\t\tthis._move = v;\n\n\t\t!this.data.option.loop && (this._v = this.constrain(this._v));\n\n\t\tthis._target = this._v;\n\t}\n\n\tup() {\n\t\tthis._state = Indexer.STATE.UP;\n\t\t\n\t\t!this.data.option.get('throwable', 'touchMove') && (this._move = 0);\n\t}\n\n\tget current() {\n\t\tconst v = this._target % this._length + this._length;\n\t\treturn Math.round(v) % this._length;\n\t}\n\n\tget i0() {\n\t\treturn this._i0;\n\t}\n\n\tget i1() {\n\t\treturn this._i1;\n\t}\n\n\tconstrain(v) {\n\t\tconst ret = v < 0 ? 0 : this._length-1 < v ? this._length-1 : v;\n\t\tthis.set({\n\t\t\t'head':ret==0,\n\t\t\t'tail':ret==this._length-1\n\t\t});\n\t\treturn ret;\n\t}\n\n\ttick() {\n\n\t\tlet complete = false;\n\n\t\tswitch(this._state) {\n\t\t\tcase Indexer.STATE.DOWN:\n\t\t\tbreak;\n\n\t\t\tcase Indexer.STATE.UP:\n\t\t\t\tthis._target += this._move;\n\n\t\t\t\t!this.data.option.loop && (this._target = this.constrain(this._target));\n\n\t\t\t\tthis._move *= 0.95;\n\t\t\t\tthis._v = this._target;\n\n\t\t\t\tif(Math.abs(this._move) < 0.01) {\n\t\t\t\t\tthis._target = Math.round(this._v);\n\t\t\t\t\tthis._state = Indexer.STATE.DEFAULT;\n\t\t\t\t}\n\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t!this.data.option.loop && (this._target = this.constrain(this._target));\n\n\t\t\t\tthis._v += (this._target - this._v) * this.data.option.easing;\n\n\t\t\t\tif(Math.abs(this._target - this._v) < 0.001) {\n\t\t\t\t\tthis._v = this._target;\n\t\t\t\t\tcomplete = true;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tconst v = this._v % this._length + this._length;\n\t\tthis.progress = v % 1;\n\t\tthis._i0 = Math.floor(v) % this._length;\n\t\tconst i1 = Math.ceil(v) % this._length;\n\t\tthis._i1 = this._i0 !== i1 ? i1 : undefined;\n\n\t\tcomplete &&\tthis.dispatch('complete');\n\t}\n}\n\nIndexer.STATE = {\n\tDEFAULT:'DEFAULT',\n\tDOWN:'DOWN',\n\tUP:'UP'\n};","class Net {\n\tconstructor() {\n\t\t/*\n\t\t * Only WOFF and EOT mime types for fonts are 'real'\n\t\t * see http://www.iana.org/assignments/media-types/media-types.xhtml\n\t\t */\n\t\tvar WOFF = 'application/font-woff';\n\t\tvar JPEG = 'image/jpeg';\n\n\t\tthis.mimes = {\n\t\t\t'woff': WOFF,\n\t\t\t'woff2': WOFF,\n\t\t\t'ttf': 'application/font-truetype',\n\t\t\t'eot': 'application/vnd.ms-fontobject',\n\t\t\t'png': 'image/png',\n\t\t\t'jpg': JPEG,\n\t\t\t'jpeg': JPEG,\n\t\t\t'gif': 'image/gif',\n\t\t\t'tiff': 'image/tiff',\n\t\t\t'svg': 'image/svg+xml'\n\t\t}\n\n\t}\n\n\n\tloadImage(image, src) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst check = () => {\n\t\t\t\tif(!image.complete) {\n\t\t\t\t\tsetTimeout(check, 10);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\timage.src = src;\n\n\t\t\tcheck();\n\t\t})\n\t}\n\n\n\tget(url, responseType) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst onChange = () => {\n\t\t\t\tswitch ( xhr.readyState ) {\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tif(xhr.status == 200 || xhr.status == 304) {\n\t\t\t\t\t\t\tresolve(xhr.response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onTimeout = () => {\n\t\t\t\treject();\n\t\t\t};\n\n\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\txhr.onreadystatechange = onChange;\n\t\t\txhr.ontimeout = onTimeout;\n\t\t\txhr.responseType = responseType;\n\t\t\txhr.timeout = 30000;\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.send(null);\n\t\t});\n\t}\n\n\n\t// async getDataURI(url) {\n\t// \tlet blob;\n\t// \tblob = await this.get(url, 'blob');\n\t// \tblob = await this.readBlob(blob);\n\t// \treturn blob;\n\t// }\n\tgetDataURI(url) {\n\t\tlet ext = this.parseExtension(url)\n\n\t\treturn this.get(url, 'blob')\n\t\t\t.then((blob) => {\n\t\t\t\treturn this.readBlob.bind(this)(blob, ext)\n\t\t\t});\n\t}\n\n\tparseExtension(url) {\n\t\tvar match = /\\.([^\\.\\/]*?)$/g.exec(url)\n\t\tif (match) return match[1]\n\t\telse return null\n\t}\n\n\tgetMimeType(ext) {\n\t}\n\n\treadBlob(blob, ext) {\n\t\tconst reader = new FileReader(),\n\t\tmimeType = ext ? this.mimes[ext] : null;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treader.onloadend = () => {\n\t\t\t\tlet ret = reader.result\n\t\t\t\tif(mimeType) {\n\t\t\t\t\tret = ret.split(',')[1]\n\t\t\t\t\tret = 'data:' + mimeType + ';base64,' + ret;\n\t\t\t\t}\n\t\t\t\tresolve(ret)\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t});\n\t}\n}\n\nexport const net = new Net();","import {BaseTransition} from '../transitions/BaseTransition'\n\n\nexport const Option = {\n\t\t\n\t//default value\n\tselector : \"#xslider\",\n\tinitialSlideIndex : 0,\n\tautoplay : false,\n\tloop : true,\n\ttouchMove : {\n\t\tthrowable : true\n\t},\n\trenderer : undefined,\n\tdebug : false,\n\teasing: 0.15,\n\t\n\ttransition: BaseTransition,\n\n\tget : function(property, module) {\n\t\tif(module) {\n\t\t\tif(!this[module]) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this[module][property];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn this[property];\n\t\t}\n\t}\n}\n\nOption.Debug = {\n\tDISPLAY: {\n\t\tDOM:\"DEBUG_DISPLAY_DOM\",\n\t\tSVG:\"DEBUG_DISPLAY_SVG\",\n\t\tIMG:\"DEBUG_DISPLAY_IMG\"\n\t}\n}","export const Utils = {\n\n\textend(base, o) {\n\t\tconst ret = {};\n\t\tObject.assign(ret, base);\n\n\t\tconst entries = Object.entries(o);\n\t\tentries.forEach(entry => {\n\t\t\tret[entry[0]] = entry[1];\n\t\t})\n\n\t\treturn ret;\n\t},\n\n\tdelegate(base, o) {\n\t\tconst entries = Object.entries(o);\n\t\tentries.forEach(entry => {\n\t\t\tbase[entry[0]] = entry[1];\n\t\t})\n\t},\n\n\tclamp(v, min, max) {\n\t\treturn Math.max(min, Math.min(max, v));\n\t},\n\n\tgetQuery(key, cached = true) {\n\n\t\tif (!this._query || !cached) {\n\t\t\tthis._query = {};\n\t\t\t//?\n\t\t\tlet query = window.location.search.substring(1);\n\t\t\tlet parameters = query.split('&');\n\t\t\tfor (let i = 0; i < parameters.length; i++) {\n\t\t\t\tlet element = parameters[i].split(\"=\");\n\t\t\t\tlet paramName = decodeURIComponent(element[0]);\n\t\t\t\tlet paramValue = decodeURIComponent(element[1]);\n\t\t\t\tthis._query[paramName] = paramValue;\n\t\t\t}\n\t\t}\n\t\treturn this._query[key];\n\t}\n\n\t// toSvg(dom) {\n\n\n\n\t// \treturn new Promise((resolve, reject) => {\n\n\t// \t\tdomtoimage.toSvg(dom)\n\t// \t\t\t.then((uri) => {\n\t// \t\t\t\t// console.log('uri: ', uri);\n\t// \t\t\t\tconst svgString = uri.replace(\"data:image/svg+xml;charset=utf-8,\",\"\");\n\n\t// \t\t\t\tconst parser = new DOMParser();\n\t// \t\t\t\tconst svg = parser.parseFromString(svgString, \"image/svg+xml\");\n\n\t// \t\t\t\tresolve(svg);\n\t// \t\t\t});\n\t// \t});\n\t// }\n}","\n\nclass Cloner {\n\tconstructor() {\n\n\t}\n\n\tcopyStyle(original, target, excludes) {\n\n\t\tlet o = {};\n\t\t\n\t\tif(excludes && excludes.length > 0) {\n\t\t\tfor(let i=0; i<excludes.length; i++) {\n\t\t\t\tlet name = excludes[i];\n\t\t\t\to[name] = target.getPropertyValue(name);\n\t\t\t}\n\t\t}\n\n\t\tif(original.cssText) {\n\t\t\ttarget.cssText = original.cssText;\n\n\t\t\t//remove fontStrech\n\t\t\t// const matches = target.cssText.match(/font:( [^ ;]+)+;/);\n\t\t\t// if(matches) {\n\t\t\t// \tconst removeFontStrech = s => {\n\t\t\t// \t\tlet arr = s.split(\" \");\n\t\t\t// \t\tarr.splice(3, 1);\n\t\t\t// \t\treturn arr.join(\" \");\n\t\t\t// \t};\n\t\t\t// \tfor(let i=0; i<matches.length; i++) {\n\t\t\t// \t\ttarget.cssText = target.cssText.replace(matches[i], removeFontStrech(matches[i]));\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t\telse {\n\t\t\tfor(let i=0; i<original.length; i++) {\n\t\t\t\tlet name = original[i];\n\t\t\t\ttarget.setProperty(name, original.getPropertyValue(name), original.getPropertyPriority(name));\n\t\t\t}\n\t\t}\n\n\t\tObject.getOwnPropertyNames(o).forEach((name) => {\n\t\t\ttarget.setProperty(name, o[name]);\n\t\t});\n\t}\n\n\tcloneNode(original) {\n\t\tconst clone = original.cloneNode(false);\n\n        return new Promise((resolve, reject) => {\n\t\t\t\t\n\t\t\tif(!(original instanceof Element)) {\n\t\t\t\tresolve(clone);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.copyStyle(window.getComputedStyle(original), clone.style);\n\t\n\t\t\t\tif (original.hasChildNodes()) {\n\t\t\t\t\tconst children = original.childNodes;\n\t\n\t\t\t\t\tconst arr = [];\n\t\n\t\t\t\t\tchildren.forEach((child, i, list) => {\n\t\t\t\t\t\tlet p = this.cloneNode(child)\n\t\t\t\t\t\t\t.then((childClone) => {\n\t\t\t\t\t\t\t\t// clone.appendChild(childClone);\n\t\t\t\t\t\t\t\tthis.insertChildAtIndex(clone, childClone, i);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tarr.push(p);\n\t\t\t\t\t});\n\t\n\t\t\t\t\tPromise.all(arr).then(()=> {\n\t\t\t\t\t\tresolve(clone);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresolve(clone);\n\t\t\t\t}\n\t\t\t}\n        })\n\t}\n\n\tinsertChildAtIndex(parent, child, index) {\n\t\tif(!index) index = 0;\n\t\tif(index >= parent.childNodes.length) {\n\t\t\tparent.appendChild(child);\n\t\t}\n\t\telse {\n\t\t\tparent.insertBefore(child, parent.childNodes[index]);\n\t\t}\n\t}\n\n\tcloneStyle(original, target, excludes) {\n\n\t\tif(!(original instanceof Element)) return target;\n\t\t\n\t\tthis.copyStyle(window.getComputedStyle(original), target.style, excludes);\n\n        if (original.hasChildNodes()) {\n\n        \tconst children = original.childNodes;\n        \tchildren.forEach((child, i, list) => {\n        \t\tthis.cloneStyle(child, target.childNodes[i], excludes);\n        \t});\n        }\n        else {\n\t\t\treturn target;\n        }\n\t}\n}\n\nexport const cloner = new Cloner();","import {cloner} from './Cloner'\nimport {net} from '../Net'\n\n\nexport const Inliner = {\n\n\tURL_REGEX : /url\\(['\"]?([^'\"]+?)['\"]?\\)/g,\n\n\n\tresolveFonts() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.inlinedFontString) {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst fontStrings = this.readFontRules().map((rule) => rule.cssText);\n\t\t\t\tthis.inlineFonts(fontStrings)\n\t\t\t\t\t.then((inlinedFontStrings) => {\n\t\t\t\t\t\tthis.inlinedFontString = inlinedFontStrings.join(\" \");\n\t\t\t\t\t\t// this.inlinedFontString = inlinedFontStrings.join(\"\\n\");\n\t\t\t\t\t\t// console.log(\"this.inlinedFontString\", this.inlinedFontString)\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t}\n\t\t})\n\t},\n\n\treadFontRules() {\n\n\t\tconst fontRules = [];\n\n\t\tconst list = document.styleSheets;\n\n\t\tfor(let j=0; j<list.length; j++) {\n\t\t\tlet ss = list[j];\n\n\t\t\tif(ss.cssRules) {\n\t\t\t\tfor(let i=0; i<ss.cssRules.length; i++) {\n\t\t\t\t\tlet rule = ss.cssRules[i];\n\t\t\t\t\tif(rule.type === CSSRule.FONT_FACE_RULE) {\n\t\t\t\t\t\tfontRules.push(rule);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// console.log(\"fontRules\", fontRules)\n\n\t\treturn fontRules;\n\t},\n\n\tinlineFonts(fontStrings) {\n\t\tconst arr = fontStrings.map((string) => this._inline(string));\n\t\treturn Promise.all(arr);\n\t},\n\n\n\tinlineNode(node) {\n\t\treturn cloner.cloneNode(node)\n\t\t\t.then(this.inlineImage.bind(this))\n\t},\n\n\n\t_inline(string) {\n\t\t// console.log('string', string)\n\t\tconst urls = this.searchUrls(string);\n\t\tconst arr = [];\n\n\t\turls.map((url) => {\n\t\t\tconst p = net.getDataURI(url)\n\t\t\t\t.then((dataURI) => {\n\t\t\t\t\tstring = string.replace(url, dataURI);\n\t\t\t\t});\n\t\t\tarr.push(p);\n\t\t});\n\n\t\treturn Promise.all(arr).then(() => string);\n\t},\n\n\n\tsearchUrls(string) {\n        const result = [];\n        let match;\n        while ((match = this.URL_REGEX.exec(string)) !== null) {\n            result.push(match[1]);\n        }\n        return result.filter((url) => {\n            return this.isDataURI(url);\n        });\n\t},\n\n\n\tinlineImage(node) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tPromise.resolve(node)\n\t\t\t\t.then(this.inlineImageElement.bind(this))\n\t\t\t\t.then(this.inlineBackgroundImage.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tif(node.hasChildNodes()) {\n\t\t\t\t        const children = node.childNodes;\n\t\t\t\t\t\tconst arr = [];\n\n\t\t\t\t        children.forEach((child, i, list) => {\n\t\t\t\t        \tlet p = this.inlineImage(child);\n\t\t\t\t        \tarr.push(p);\n\t\t\t\t    \t});\n\n\t\t\t\t    \tPromise.all(arr).then(()=> {\n\t\t\t\t    \t\tresolve(node);\n\t\t\t\t    \t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresolve(node);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t},\n\n\n\tinlineImageElement: function(node) {\n\t\tif(!(node instanceof HTMLImageElement)) return node;\n\n\t\tif(this.isDataURI(node.src)) return node;\n\n\t\t// return node;\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tnet.getDataURI(node.src)\n\t\t\t\t.then((dataURI) => {\n\t\t\t\t\tnode.onload = () => {\n\t\t\t\t\t\tresolve(node);\n\t\t\t\t\t}\n\t\t\t\t\tnode.onerror = reject;\n\t\t\t\t\tnode.src = dataURI;\n\t\t\t});\n\t\t});\n\t},\n\n\n\tinlineBackgroundImage(node) {\n\t\tif(!(node instanceof Element)) return node;\n\n\t\tconst background = node.style.getPropertyValue('background');\n\t\tif(!background) return node;\n\n\t\treturn this._inline(background)\n\t\t\t.then((inlined) => {\n                node.style.setProperty('background', inlined);\n                return node;\n\t\t\t});\n\t},\n\n\n\tisDataURI(string) {\n\t\treturn string.search(/^(data:)/) === -1;\n\t}\n\n\t\n}","import {Inliner} from './Inliner'\n\n/**\n * It's based on {@link https://github.com/tsayen/dom-to-image dom-to-image by Anatolii Saienko}.\n */\nexport const converter = {\n\tparser : new DOMParser(),\n\n\tconvert(node, width, height) {\n/*\n\t\tconst svgString = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"`+width+`\" height=\"`+height+`\">\n\t<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n\t\t<body xmlns=\"http://www.w3.org/1999/xhtml\" style=\"margin:0;\">\n\t\t\t<style>`+Inliner.inlinedFontString+`</style>\n\t\t</body>\n\t</foreignObject>\n</svg>\n\t\t`\n\t\t// console.log('--')\n\t\t// console.log(Inliner.inlinedFontString)\n\t\tconst svg = this.parser.parseFromString(svgString, \"text/xml\");\n\t\tlet o = svg.getElementsByTagName('body')[0];\n\t\to.appendChild(node);\n*/\n\t\tnode.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n\n\t\tconst svgString = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"`+width+`\" height=\"`+height+`\">\n\t\t<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n\t\t</foreignObject>\n\t\t</svg>`\n\n\t\tconst svg = this.parser.parseFromString(svgString, \"text/xml\"),\n\t\tstyleNode = document.createElement('style')\n\n\t\tstyleNode.appendChild(document.createTextNode(Inliner.inlinedFontString));\n\t\tnode.appendChild(styleNode)\n\n\t\tlet o = svg.getElementsByTagName('foreignObject')[0];\n\t\to.appendChild(node);\n\n\t\t// console.log('svg: ', svg.childNodes[0]);\n\n\t\treturn svg;\n\t},\n}","import {Buffer} from './assets/Buffer'\r\nimport {ShaderVarFormat, Uniform} from './assets/Program'\r\nimport {Texture} from './assets/Texture'\r\nimport { Vec4 } from '../../geom/Vec';\r\n\r\n\r\nconst GraphicsContext = {\r\n    bound: {\r\n        sceneContext: undefined,\r\n        program: undefined,\r\n        viewport: new Vec4()\r\n    },\r\n\r\n    test: {\r\n        depth: false,\r\n        stensil: false\r\n    },\r\n\r\n    reset: function() {\r\n        this.bound = {\r\n            sceneContext: undefined,\r\n            program: undefined,\r\n            viewport: new Vec4()\r\n        }\r\n\r\n        this.test = {\r\n            depth: false,\r\n            stensil: false\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const GLGraphics =  {\r\n\r\n    setup: function(canvas) {\r\n        const params = {\r\n            alpha: true,\r\n            premultipliedAlpha: false\r\n        }\r\n        this._gl = canvas.getContext(\"webgl\", params) || canvas.getContext(\"experimental-webgl\", params);\r\n        if(!this.context) {\r\n            this.context = GraphicsContext;\r\n        }\r\n        else {\r\n            this.context.reset();\r\n        }\r\n    },\r\n\r\n    updateTexture: function(texture, textureUnit) {\r\n        const gl = this._gl;\r\n\r\n        if(!texture.location) {\r\n            texture.location = gl.createTexture();\r\n        }\r\n\r\n        gl.activeTexture(gl[\"TEXTURE\"+textureUnit]);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.location);\r\n\r\n        if(texture.needsUpdate) {\r\n            texture.needsUpdate = false;\r\n\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\r\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n            if(texture.image) {\r\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);\r\n            }\r\n            else {\r\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0,0,0,0]));\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    deleteTexture: function(texture) {\r\n        if(texture.location) {\r\n            this._gl.deleteTexture(texture.location);\r\n            texture.location = undefined;\r\n        }\r\n    },\r\n\r\n\r\n    updateProgram: function(program) {\r\n        const gl = this._gl;\r\n\r\n        if(!program.location) {\r\n            program.location = gl.createProgram();\r\n\r\n            this.updateShader(program.vertex);\r\n            gl.attachShader(program.location, program.vertex.location);\r\n\r\n            this.updateShader(program.fragment)\r\n            gl.attachShader(program.location, program.fragment.location);\r\n            \r\n            gl.linkProgram(program.location);\r\n            \r\n            this.deleteShader(program.vertex);\r\n            this.deleteShader(program.fragment);\r\n\r\n            if (!gl.getProgramParameter(program.location, gl.LINK_STATUS)) {\r\n                throw new Error(\"Could not initialise shaders\");\r\n            }\r\n        }\r\n        \r\n        gl.useProgram(program.location);\r\n        \r\n        this.context.bound.program = program;\r\n\r\n        if(program.needsUpdate) {\r\n            program.update();\r\n            program.needsUpdate = false;\r\n        }\r\n\r\n        for(let i=0; i<program.attributes.length; i++) {\r\n            this.updateAttribute(program.attributes[i], program.stride);\r\n        }\r\n\r\n        for(let i=0; i<program.uniforms.length; i++) {\r\n            this.updateUniform(program.uniformBuffer, program.uniforms[i]);\r\n        }\r\n    },\r\n\r\n    deleteProgram: function(program) {\r\n        const gl = this._gl;\r\n\r\n        if(program.location) {\r\n            gl.deleteProgram(program.location);\r\n        }\r\n    },\r\n\r\n    updateShader: function(shader) {\r\n        const gl = this._gl;\r\n\r\n        if(!shader.location) {\r\n            shader.location = gl.createShader(gl[shader.type]);\r\n        }\r\n\r\n        gl.shaderSource(shader.location, shader.source);\r\n        gl.compileShader(shader.location);\r\n\r\n        if (!gl.getShaderParameter(shader.location, gl.COMPILE_STATUS)) {\r\n            throw new Error(gl.getShaderInfoLog(shader.location));\r\n        }\r\n    },\r\n\r\n    deleteShader: function(shader) {\r\n        const gl = this._gl;\r\n\r\n        if(shader.location) {\r\n            gl.deleteShader(shader.location);\r\n            shader.location = undefined;\r\n        }\r\n    },\r\n\r\n    updateAttribute: function(attribute, stride) {\r\n        const gl = this._gl;\r\n        const a = attribute;\r\n\r\n        if(!a.location) {\r\n            a.location = gl.getAttribLocation(this.context.bound.program.location, a.name);\r\n\r\n            if(a.location < 0) {\r\n                throw new Error(\"attribute \" + a.name + \" undefined.\");\r\n            }\r\n        \r\n            gl.enableVertexAttribArray(a.location);\r\n        }\r\n\r\n        gl.vertexAttribPointer(a.location, a.size, gl[a.format], gl.FALSE, stride, a.offset);\r\n    },\r\n\r\n    updateUniform: function(buffer, uniform) {\r\n        const gl = this._gl;\r\n\r\n        if(!uniform.location) {\r\n            uniform.location = gl.getUniformLocation(this.context.bound.program.location, uniform.name);\r\n        }\r\n\r\n        switch(uniform.name) {\r\n            case Uniform.Binding.ModelView:\r\n                gl.uniformMatrix4fv(uniform.location, false, bound.model.matrix.local.data);\r\n            break;\r\n            case Uniform.Binding.Projection:\r\n                gl.uniformMatrix4fv(uniform.location, false, bound.camera.matrix.projection.data);\r\n            break;\r\n            default:\r\n                if(uniform.valueObject.value instanceof Texture) {\r\n                    this.updateTexture(uniform.valueObject.value, uniform.textureUnit);\r\n                    gl.uniform1i(uniform.location, uniform.textureUnit);\r\n                }\r\n                else {\r\n                    switch(uniform.shaderVarFormat) {\r\n                        case ShaderVarFormat.Int:\r\n                        gl.uniform1i(uniform.location, uniform.valueObject.value);\r\n                        break;\r\n        \r\n                        case ShaderVarFormat.Float:\r\n                        gl.uniform1f(uniform.location, uniform.valueObject.value);\r\n                        break;\r\n        \r\n                        case ShaderVarFormat.Vector2:\r\n                        gl.uniform2fv(uniform.location, uniform.valueObject.value.data);\r\n                        break;\r\n        \r\n                        case ShaderVarFormat.Vector3:\r\n                        gl.uniform3fv(uniform.location, uniform.valueObject.value.data);\r\n                        break;\r\n        \r\n                        case ShaderVarFormat.Vector4:\r\n                        gl.uniform4fv(uniform.location, uniform.valueObject.value.data);\r\n                        break;\r\n        \r\n                        case ShaderVarFormat.Matrix3:\r\n                        gl.uniformMatrix3fv(uniform.location, uniform.valueObject.value.data);\r\n                        break;\r\n                        \r\n                        case ShaderVarFormat.Matrix4:\r\n                        gl.uniformMatrix4fv(uniform.location, uniform.valueObject.value.data);\r\n                        break;\r\n                    }\r\n                }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    updateBuffer: function(buffer) {\r\n\r\n        const gl = this._gl;\r\n\r\n        if(!buffer.location) {\r\n            buffer.location = gl.createBuffer();\r\n        }\r\n\r\n        let target;\r\n\r\n        if(buffer.bufferType !== Buffer.Type.Index) {\r\n            target = gl.ARRAY_BUFFER;\r\n        }\r\n        else {\r\n            target = gl.ELEMENT_ARRAY_BUFFER;\r\n        }\r\n\r\n        gl.bindBuffer(target, buffer.location);\r\n\r\n        if(buffer.needsUpdate) {\r\n            gl.bufferData(target, buffer.data, gl[buffer.usage]);\r\n            buffer.needsUpdate = false;\r\n        }\r\n    },\r\n\r\n\r\n    updateSceneContext: function(sceneContext) {\r\n        if(this.context.bound.sceneContext === sceneContext) return;\r\n\r\n        const gl = this._gl;\r\n\r\n        if(this.context.test.depth != sceneContext.test.depth) {\r\n            sceneContext.test.depth ? gl.enable(gl.DEPTH_TEST) : gl.disable(gl.DEPTH_TEST);\r\n            this.context.test.depth = sceneContext.test.depth;\r\n        }\r\n\r\n        if(this.context.test.stencil != sceneContext.test.stencil) {\r\n            sceneContext.test.stencil ? gl.enable(gl.STENCIL_TEST) : gl.disable(gl.STENCIL_TEST);\r\n            this.context.test.stencil = sceneContext.test.stencil;\r\n        }\r\n\r\n        this.context.bound.sceneContext = sceneContext;\r\n    },\r\n\r\n\r\n    updateCamera: function(camera) {\r\n        this.context.bound.camera = camera;\r\n\r\n        const v = camera.viewport;\r\n\r\n        if(!this.context.bound.viewport.equals(v)) {\r\n            this.context.bound.viewport.set(v.x, v.y, v.z, v.w);\r\n            this._gl.viewport(v.x, v.y, v.width, v.height);\r\n        }\r\n    },\r\n\r\n\r\n    clear: function(sceneContext) {\r\n        const gl = this._gl;\r\n\r\n        const c = sceneContext;\r\n        let bits = 0;\r\n\r\n        if(c.clear.color) {\r\n            gl.clearColor(c.color.r, c.color.g, c.color.b, c.color.a);\r\n            bits |= gl.COLOR_BUFFER_BIT;\r\n        }\r\n\r\n        if(c.clear.depth) {\r\n            bits |= gl.DEPTH_BUFFER_BIT;\r\n        }\r\n\r\n        if(c.clear.stencil) {\r\n            bits |= gl.STENCIL_BUFFER_BIT;\r\n        }\r\n\r\n        gl.clear(bits);\r\n    },\r\n\r\n\r\n    renderModel: function(model) {\r\n        this.context.bound.model = model;\r\n\r\n        if(model.scene) {\r\n            this.updateSceneContext(model.scene.context);\r\n        }\r\n\r\n        this.updateCamera(model.scene.camera);\r\n\r\n        this.renderMesh(model.mesh);\r\n    },\r\n\r\n\r\n    renderMesh: function(mesh, mat) {\r\n        const gl = this._gl;\r\n\r\n        this.updateBuffer(mesh.vertexBuffer);\r\n        this.updateProgram(mesh.material.program);\r\n\r\n        let bf = mesh.indexBuffer;\r\n\r\n        this.updateBuffer(bf);\r\n        gl.drawElements(gl[bf.drawMode], bf.limit, gl[bf.format], 0);\r\n    }\r\n}\r\n","import {Program, Uniform} from './assets/Program'\r\nimport {Texture} from './assets/Texture'\r\n\r\nexport class Material {\r\n    constructor(option) {\r\n        \r\n        this.program = new Program();\r\n        this.program.vertex.updateSource(option.vertexShader);\r\n        this.program.fragment.updateSource(option.fragmentShader);\r\n\r\n        this.uniforms = option.uniforms;\r\n\r\n        if(this.uniforms) {\r\n            let textureCount = -1;\r\n            Object.keys(this.uniforms).forEach((key) => {\r\n                let o = this.uniforms[key];\r\n                if(o.value instanceof Texture) {\r\n                    this.program.addUniform(new Uniform(key, o, ++textureCount));\r\n                }\r\n                else {\r\n                    this.program.addUniform(new Uniform(key, o));\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","import {EventDispatcher} from '../../core/EventDispatcher'\r\nimport {Buffer, VarFormat, IndexBuffer} from './assets/Buffer'\r\n\r\nexport class Mesh extends EventDispatcher {\r\n    constructor() {\r\n        super();\r\n\r\n        this.vertexBuffer = new Buffer(VarFormat.Float, Buffer.Type.Interleaved, Buffer.Usage.Static);\r\n        this.indexBuffer = new IndexBuffer(IndexBuffer.DrawMode.Triangles);\r\n    }\r\n}","import {EventDispatcher} from '../../../core/EventDispatcher'\r\n\r\nexport class Asset extends EventDispatcher {\r\n    constructor() {\r\n        super();\r\n\r\n        this.needsUpdate = true;\r\n\r\n        this.location = undefined;\r\n    }\r\n}","import {Asset} from './Asset'\r\n\r\n\r\nexport const VarFormat = {\r\n    Byte : \"BYTE\",\r\n    UnsignedByte : \"UNSIGNED_BYTE\",\r\n    Short : \"SHORT\",\r\n    UnsignedShort : \"UNSIGNED_SHORT\",\r\n    Int : \"INT\",\r\n    UnsignedInt : \"UNSIGNED_INT\",\r\n    Float : \"FLOAT\",\r\n}\r\n\r\nconst getTypedArrayByFormat = (format, length) => {\r\n    switch(format) {\r\n        case VarFormat.Byte:    return new Int8Array(length);\r\n        case VarFormat.UnsignedByte:    return new Uint8Array(length);\r\n        case VarFormat.Short:    return new Int16Array(length);\r\n        case VarFormat.UnsignedShort:    return new Uint16Array(length);\r\n        case VarFormat.Int:    return new Int32Array(length);\r\n        case VarFormat.UnsignedInt:    return new Uint32Array(length);\r\n        case VarFormat.Float:    return new Float32Array(length);\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport class Buffer extends Asset {\r\n    constructor(format, bufferType, usage) {\r\n        super();\r\n\r\n        this.format = format;\r\n        this.bufferType = bufferType;\r\n        this.usage = usage;\r\n\r\n        this.data = getTypedArrayByFormat(this.format, 1);\r\n    }\r\n\r\n    clear() {\r\n        this.position = 0;\r\n        this.limit = 0;\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n    allocate(length) {\r\n        if(this.data.length < length) {\r\n            this.extend(length);\r\n        }\r\n        this.clear();\r\n    }\r\n\r\n    get(offset, length=1) {\r\n        return this.data.subarray(offset, length);\r\n    }\r\n\r\n    put(original) {\r\n        \r\n        if(original instanceof Array || original instanceof Float32Array) {\r\n            this.data.set(original, this.position);\r\n            this.position += original.length;\r\n        }\r\n        else {\r\n            this.data[this.position] = original;\r\n            this.position += 1;\r\n        }\r\n\r\n        this.limit = this.position;\r\n\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n    update(original, offset) {\r\n        if(original instanceof Array || original instanceof Float32Array) {\r\n            this.data.set(original, offset);\r\n        }\r\n        else {\r\n            this.data[offset] = original;\r\n        }\r\n\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n    extend(length) {\r\n        const tmp = this.data;\r\n        let v = tmp.length;\r\n        while(v < length) {\r\n            v *= 2;\r\n        }\r\n        this.data = getTypedArrayByFormat(this.format, v);\r\n        this.data.set(tmp);\r\n    }\r\n}\r\n\r\nBuffer.Usage = {\r\n    Static : \"STATIC_DRAW\",\r\n    Dynamic : \"DYNAMIC_DRAW\",\r\n    Stream : \"STREAM_DRAW\"\r\n}\r\n\r\nBuffer.Type = {\r\n    Interleaved : \"Interleaved\",\r\n    Index : \"Index\"\r\n}\r\n\r\nexport class IndexBuffer extends Buffer {\r\n    constructor(drawMode) {\r\n        super(VarFormat.UnsignedShort, Buffer.Type.Index, Buffer.Usage.Static);\r\n\r\n        this.drawMode = drawMode;\r\n    }\r\n}\r\n\r\nIndexBuffer.DrawMode = {\r\n    Triangles:\"TRIANGLES\"\r\n}","import {Asset} from './Asset'\r\nimport {Buffer, VarFormat} from './Buffer'\r\nimport {Texture} from './Texture'\r\nimport {Matrix3, Matrix4} from '../../../geom/Matrix'\r\nimport { Vec2, Vec3, Vec4 } from '../../../geom/Vec';\r\n\r\n\r\nexport const ShaderVarFormat = {\r\n    Int:\"Int\",\r\n    Float:\"Float\",\r\n    Vector2:\"Vector2\",\r\n    Vector3:\"Vector3\",\r\n    Vector4:\"Vector4\",\r\n    Matrix3:\"Matrix3\",\r\n    Matrix4:\"Matrix4\"\r\n}\r\n\r\nconst getSizeFromShaderVarFormat = format => {\r\n    switch(format) {\r\n        case ShaderVarFormat.Int:\r\n        case ShaderVarFormat.Float:\r\n            return 1;\r\n        case ShaderVarFormat.Vector2:\r\n            return 2;\r\n        case ShaderVarFormat.Vector3:\r\n            return 3;\r\n        case ShaderVarFormat.Vector4:\r\n            return 4;\r\n        case ShaderVarFormat.Matrix3:\r\n            return 9;\r\n        case ShaderVarFormat.Matrix4:\r\n            return 16;\r\n        default:\r\n            return 0;\r\n            \r\n    }\r\n}\r\n\r\n\r\nexport class ShaderVar extends Asset {\r\n    constructor(name, varFormat, shaderVarFormat) {\r\n        super();\r\n\r\n        this.name = name;\r\n        this.format = varFormat;\r\n        this.shaderVarFormat = shaderVarFormat;\r\n\r\n        this.offset = 0;\r\n        this.size = getSizeFromShaderVarFormat(shaderVarFormat);\r\n    }\r\n}\r\n\r\n\r\nexport class Uniform extends ShaderVar {\r\n    constructor(name, valueObject, textureUnit=-1) {\r\n\r\n        let varFormat;\r\n        let shaderVarFormat;\r\n\r\n        if(valueObject) {\r\n            varFormat = VarFormat.Float;\r\n\r\n            switch(valueObject.value.constructor) {\r\n                case Texture:\r\n                    varFormat = VarFormat.Int;\r\n                    shaderVarFormat = ShaderVarFormat.Int;\r\n                    break;\r\n                case Matrix3:\r\n                    shaderVarFormat = ShaderVarFormat.Matrix3;\r\n                    break;\r\n                case Matrix4:\r\n                    shaderVarFormat = ShaderVarFormat.Matrix4;\r\n                    break;\r\n                case Vec2:\r\n                    shaderVarFormat = ShaderVarFormat.Vector2;\r\n                    break;\r\n                case Vec3:\r\n                    shaderVarFormat = ShaderVarFormat.Vector3;\r\n                    break;\r\n                case Vec4:\r\n                    shaderVarFormat = ShaderVarFormat.Vector4;\r\n                    break;\r\n                default:\r\n                    shaderVarFormat = ShaderVarFormat.Float;\r\n            }\r\n        }\r\n\r\n        super(name, varFormat, shaderVarFormat);\r\n\r\n        this.valueObject = valueObject;\r\n        this.textureUnit = textureUnit;\r\n    }\r\n}\r\n\r\n\r\nUniform.Binding = {\r\n    Projection: \"projectionMatrix\",\r\n    ModelView: \"modelViewMatrix\"\r\n}\r\n\r\n\r\nexport class Shader extends Asset {\r\n    constructor(type) {\r\n        super();\r\n\r\n        this.type = type;\r\n    }\r\n\r\n    updateSource(source) {\r\n        this.source = source;\r\n    }\r\n}\r\n\r\nShader.VERTEX = \"VERTEX_SHADER\";\r\nShader.FRAGMENT = \"FRAGMENT_SHADER\";\r\n\r\nexport class Program extends Asset {\r\n    constructor() {\r\n        super();\r\n\r\n        this.vertex = new Shader(Shader.VERTEX);\r\n        this.fragment = new Shader(Shader.FRAGMENT);\r\n\r\n        this.attributes = [];\r\n        this.uniforms = [];\r\n\r\n        this.stride = 0;\r\n\r\n        // this.uniformBuffer = new Buffer(VarFormat.Float, Buffer.Type.Interleaved, Buffer.Usage.Static);\r\n        // this.uniformBuffserSize = 0;\r\n    }\r\n\r\n    addAttribute(attribute) {\r\n        this.attributes.push(attribute);\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n    addUniform(uniform) {\r\n        this.uniforms.push(uniform);\r\n        this.needsUpdate = true;\r\n    }\r\n\r\n    update() {\r\n        this.stride = 0;\r\n\r\n        const bytes_per_float = 4;\r\n\r\n        for(let i=0; i<this.attributes.length; i++) {\r\n            let a = this.attributes[i];\r\n            a.offset = this.stride;\r\n            this.stride += bytes_per_float * a.size;\r\n        }\r\n\r\n        // this.uniformBuffserSize = 0;\r\n        // for(let i=0; i<this.uniforms.length; i++) {\r\n        //     let u = this.uniforms[i];\r\n        //     u.offset = this.uniformBuffserSize;\r\n        //     this.uniformBufferSize += bytes_per_float * u.size;\r\n        // }\r\n\r\n        // this.uniformBuffer.allocate(this.uniformBufferSize);\r\n    }\r\n}","import {Asset} from './Asset'\r\n\r\nexport class Texture extends Asset {\r\n    constructor(src) {\r\n        super();\r\n\r\n        this.image = undefined;\r\n\r\n        if(src) {\r\n            this.setup(src);\r\n        }\r\n    }\r\n\r\n    setup(src) {\r\n        if(!this.image) {\r\n            this.image = new Image();\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            if(this.image.src != src) {\r\n                this.needsUpdate = false;\r\n                this.image.src = src;\r\n                this.image.onload = () => {\r\n                    this.needsUpdate = true;\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n}","import {EventDispatcher} from '../../../core/EventDispatcher'\r\nimport {Mesh} from '../Mesh'\r\nimport {Vec4} from '../../../geom/Vec'\r\n// import {Matrix3, Matrix4} from '../../../geom/Matrix'\r\n\r\nexport class Node extends EventDispatcher {\r\n    constructor() {\r\n        super();\r\n\r\n        this.children = [];\r\n\r\n        this.matrix = {}\r\n    }\r\n\r\n    addChild(node) {\r\n        this.children.push(node);\r\n        node.parent = this;\r\n    }\r\n\r\n    removeChild(node) {\r\n        node.parent = undefined;\r\n\r\n        var index = this.children.indexOf(node);\r\n        if (index > -1) {\r\n            this.children.splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\r\n// export class Node2D extends Node {\r\n//     constructor() {\r\n//         super();\r\n\r\n//         this.matrix.local = new Matrix3();\r\n//     }\r\n// }\r\n\r\n// export class Node3D extends Node {\r\n//     constructor() {\r\n//         super();\r\n\r\n//         this.matrix.local = new Matrix4();\r\n//     }\r\n// }\r\n\r\nexport class Model extends Node {\r\n    constructor() {\r\n        super();\r\n\r\n        this.mesh = new Mesh();\r\n    }\r\n}\r\n\r\nexport class Camera extends Node {\r\n    constructor() {\r\n        super();\r\n\r\n        this.viewport = new Vec4();\r\n\r\n        // this.matrix.projection = new Matrix4();\r\n        // this.matrix.view = new Matrix4();\r\n        // this.matrix.viewProjection = new Matrix4();\r\n    }\r\n\r\n    // perspective(fov, aspect, near, far) {\r\n    //     this.matrix.projection.perspective(fov, aspect, near, far);\r\n    // }\r\n\r\n    setViewport(x, y, width, height) {\r\n        this.viewport.set(x, y, width, height);\r\n        // this.perspective(60, width/height, 0.1, 100);\r\n    }\r\n}","import {Color} from '../../../geom/Color'\r\nimport {Node, Camera} from './Node'\r\n\r\n\r\nexport class SceneContext {\r\n    constructor() {\r\n        this.clear = {\r\n            color: true,\r\n            depth: false,\r\n            stencil: false\r\n        }\r\n\r\n        this.test = {\r\n            depth: false,\r\n            stencil: false\r\n        }\r\n\r\n        this.color = new Color();\r\n    }\r\n}\r\n\r\nexport class Scene3D extends Node {\r\n    constructor() {\r\n        super();\r\n\r\n        this.context = new SceneContext();\r\n\r\n        this.camera = new Camera();\r\n    }\r\n\r\n    addChild(node) {\r\n        \r\n        if(node.parent) {\r\n            node.parent.removeChild(node);\r\n        }\r\n\r\n        super.addChild(node);\r\n\r\n        node.scene = this;\r\n    }\r\n\r\n    removeChild(node) {\r\n        super.removeChild(node);\r\n\r\n        node.scene = undefined;\r\n    }\r\n}","import {EventDispatcher} from './EventDispatcher'\n\nclass Environment extends EventDispatcher {\n\tconstructor() {\n\t\tsuper();\n\n\t\tconsole.info(\"xslider ver.\",XSLIDER_VERSION);\n\t\t// if(!THREE) {\n\t\t// \tconsole.error(\"xslider depend on three.js\");\n\t\t// }\n\t\t// if(!domtoimage) {\n\t\t// \tconsole.error(\"xslider depend on dom-to-image\");\n\t\t// }\n\t}\n\n\tget support() {\n\t\treturn Environment.support;\n\t}\n}\n\nEnvironment.support = {\n\ttouch : ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch,\n\tpointer : window.navigator.pointerEnabled,\n\tMSPointer : window.navigator.msPointerEnabled\n};\n\nexport const env = new Environment();","import {env} from './Environment'\n\nexport const Event = {\n\tCHANGE : 'change',\n};\n\nconst types = [];\nif(env.support.touch) {\n\ttypes.push('touchstart','touchmove','touchend');\n}\nelse if(env.support.pointer) {\n\ttypes.push('pointerdown','pointermove','pointerup');\n}\nelse if(env.support.MSPointer) {\n\ttypes.push('MSPointerDown','MSPointerMove','MSPointerUp');\n}\nelse {\n\ttypes.push('mousedown','mousemove','mouseup');\n}\n\nexport const TouchEvent = {\n\tSTART : types[0],\n\tMOVE : types[1],\n\tEND : types[2],\n};\n","\n\n\n\nexport class EventDispatcher {\n\n\tconstructor() {\n\t\tthis._listeners = {};\n\t\tthis._properties = {};\n\t}\n\n\tget listeners() {\n\t\treturn this._listeners;\n\t}\n\n\tget(key) {\n\t\treturn this._properties[key];\n\t}\n\n\tset(properties) {\n\t\tif (!properties) return;\n\n\t\tfor (let key in properties) {\n\n\t\t\tif ((this._properties[key] === undefined && properties[key] !== undefined) || this._properties[key] !== properties[key]) {\n\t\t\t\tlet v0 = this._properties[key];\n\t\t\t\tthis._properties[key] = properties[key];\n\n\t\t\t\tthis.dispatch(key, {\n\t\t\t\t\ttype: key,\n\t\t\t\t\tvalue: this._properties[key],\n\t\t\t\t\tvalue0: v0\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\t}\n\n\tdispatch(type, options) {\n\t\tif (this._listeners.hasOwnProperty(type)) {\n\t\t\tthis._listeners[type].forEach(o => {\n\t\t\t\tlet tmp = options || { type: type };\n\t\t\t\to.listener(tmp);\n\t\t\t})\n\t\t}\n\t}\n\n\ton(type, listener) {\n\n\t\tthis.off(type, listener);\n\n\t\tif (!this._listeners.hasOwnProperty(type)) {\n\t\t\tthis._listeners[type] = [];\n\t\t}\n\n\t\tthis._listeners[type].push({ type: type, listener: listener });\n\n\t\treturn this;\n\t}\n\n\toff(type, listener) {\n\t\tif (type) {\n\t\t\tif (!listener) {\n\t\t\t\tdelete this._listeners[type];\n\t\t\t}\n\t\t\telse if (this._listeners.hasOwnProperty(type)) {\n\t\t\t\tthis._listeners[type].some((elem, i) => {\n\t\t\t\t\tif (elem.listener == listener) this._listeners[type].splice(i, 1);\n\t\t\t\t});\n\t\t\t\tif (this._listeners[type].length == 0) {\n\t\t\t\t\tdelete this._listeners[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let type in this._listeners) {\n\t\t\t\tdelete this._listeners[type];\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n};\n","import {env} from './Environment'\nimport {Event, TouchEvent} from './Event'\nimport {EventDispatcher} from './EventDispatcher'\n\nexport class InteractiveObject extends EventDispatcher {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._defineHandlers();\n\n\t\tthis.on('target', this._on.changeTarget);\n\t}\n\n\n\t_defineHandlers() {\n\n\t\tthis._on = {\n\t\t\tbubble : (e) => {\n\t\t\t\tthis.dispatch(e.type, e);\n\t\t\t},\n\n\t\t\tchangeTarget : (o) => {\n\t\t\t\tif(o.value0) {\n\t\t\t\t\tfor(let type in this._listeners) {\n\t\t\t\t\t\tthis._autoRemoveListener(o.value0, type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.off();\n\t\t\t},\n\n\t\t\ttouch : (e) => {\n\n\t\t\t\tif(env.support.touch) {\n\t\t\t\t\tlet touch = e.touches[0]\n\t\t\t\t\tif(touch) {\n\t\t\t\t\t\te.clientX = touch.clientX;\n\t\t\t\t\t\te.clientY = touch.clientY;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\te.clientX = this.clientX0;\n\t\t\t\t\t\te.clientY = this.clientY0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(!this.clientX0) {\n\t\t\t\t\tthis.clientX0 = e.clientX;\n\t\t\t\t\tthis.clientY0 = e.clientY;\n\t\t\t\t}\n\n\t\t\t\te.clientX0 = this.clientX0;\n\t\t\t\te.clientY0 = this.clientY0;\n\n\t\t\t\tthis.clientX0 = e.clientX;\n\t\t\t\tthis.clientY0 = e.clientY;\n\n\t\t\t\tthis.dispatch(e.type, e);\n\t\t\t},\n\n\t\t\ttouchStart : (e) => {\n\t\t\t\tthis.clientX0 = this.clientY0 = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tdispose() {\n\t\tthis.off();\n\t}\n\n\n\ton(type, listener, options) {\n\n\t\tsuper.on(type, listener, options);\n\n\t\tconst target = this.get('target');\n\t\tthis._autoAddListener(target, type);\n\t\t\n\t\treturn this;\n\t}\n\n\n\toff(type, listener) {\n\n\t\tsuper.off(type, listener);\n\n\t\tconst target = this.get('target');\n\t\tthis._autoRemoveListener(target, type);\n\t\t\n\t\treturn this;\n\t}\n\n\n\t_autoAddListener(target, type) {\n\n\t\tif(!target) return;\n\n\t\tif(this._listeners[type].length == 1) {\n\t\t\tswitch(type) {\n\t\t\t\tcase TouchEvent.START:\n\t\t\t\tcase TouchEvent.MOVE:\n\t\t\t\tcase TouchEvent.END:\n\t\t\t\t\ttarget.addEventListener(type, this._on.touch);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'click':\n\t\t\t\t\ttarget.addEventListener(type, this._on.bubble);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(type == TouchEvent.MOVE) {\n\t\t\t\ttarget.addEventListener(TouchEvent.START, this._on.touchStart);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t_autoRemoveListener(target, type) {\n\n\t\tif(!target) return;\n\n\t\tif(!this._listeners[type] || this._listeners[type].length == 0) {\n\t\t\tswitch(type) {\n\t\t\t\tcase TouchEvent.START:\n\t\t\t\tcase TouchEvent.MOVE:\n\t\t\t\tcase TouchEvent.END:\n\t\t\t\t\ttarget.removeEventListener(type, this._on.touch);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'click':\n\t\t\t\t\ttarget.removeEventListener(type, this._on.bubble);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(type == TouchEvent.MOVE) {\n\t\t\t\ttarget.removeEventListener(TouchEvent.START, this._on.touchStart);\n\t\t\t}\n\t\t}\n\t}\n}","import {Event, TouchEvent} from '../core/Event'\nimport {InteractiveObject} from '../core/InteractiveObject'\nimport {env} from '../core/Environment'\nimport {Ticker} from './Ticker'\n\nclass Stage extends InteractiveObject {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.ticker = new Ticker();\n\n\t\tthis.set({target:window});\n\t}\n\n\tready() {\n\t\treturn new Promise((resolve,reject) => {\n\n\t\t\tconst loaded = () => {\n\t\t\t    document.removeEventListener('DOMContentLoaded', loaded), \n\t\t\t    window.removeEventListener('load', loaded);\n\n\t\t\t    resolve();\n\t\t\t};\n\n\t\t\tif(document.readyState === 'complete') {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', loaded), \n\t\t\t\twindow.addEventListener('load', loaded);\n\t\t\t}\n\t\t})\n\t}\n\n\tget width() {\n\t\treturn (window.innerWidth || document.documentElement.clientWidth || 0);\n\t}\n\n\tget height() {\n\t\treturn (window.innerHeight || document.documentElement.clientHeight || 0);\n\t}\n\n\t_autoAddListener(target, type) {\n\n\t\tif(!target) return;\n\n\t\tsuper._autoAddListener(target, type);\n\n\t\tif(this._listeners[type].length == 1) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'tick':\n\t\t\t\t\tthis.ticker.on(type, this._on.bubble);\n\t\t\t\t\tthis.ticker.start();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'resize':\n\t\t\t\t\ttarget.addEventListener(type, this._on.bubble);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_autoRemoveListener(target, type) {\n\n\t\tif(!target) return;\n\n\t\tsuper._autoRemoveListener(target, type);\n\n\t\tif(!this._listeners[type] || this._listeners[type].length == 0) {\n\t\t\tswitch(type) {\n\t\t\t\tcase 'tick':\n\t\t\t\t\tthis.ticker.off(type, this._on.bubble);\n\t\t\t\t\tthis.ticker.stop();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'resize':\n\t\t\t\t\ttarget.removeEventListener(type, this._on.bubble);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\t\n}\n\n//singleton\nexport const stage = new Stage;\n\n","import {EventDispatcher} from '../core/EventDispatcher';\n\nexport const Ticker = class extends EventDispatcher {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.fps = 30;\n\n\t\tthis._defineFunctions();\n\t}\n\n\t_defineFunctions() {\n\n\t\tconst prefixes = [\"ms\",\"moz\",\"webkit\",\"o\"];\n\t\tlet i = prefixes.length;\n\n\t\twhile (--i > -1 && !window.requestAnimationFrame) {\n\t\t\twindow.requestAnimationFrame = window[prefixes[i] + \"RequestAnimationFrame\"];\n\t\t\twindow.cancelAnimationFrame = window[prefixes[i] + \"CancelAnimationFrame\"] || window[prefixes[i] + \"CancelRequestAnimationFrame\"];\n\t\t}\n\n\n\t\tthis._tickHandler = () => {\n\t\t\tthis._requestId = window.requestAnimationFrame(this._tickHandler);\n\n\t\t\tthis._lastMs = this.time;\n\n\t\t\tlet overlap = this._lastMs - this._nextMs;\n\n\t\t\tif(overlap >= 0) {\n\t\t\t\tconst t0 = this._nextMs;\n\t\t\t\tthis._nextMs += overlap + (overlap >= this._gap ? 1 : this._gap - overlap);\n\t\t\t\tthis.dispatch('tick', {type:'tick', time:this._lastMs - this._startMs, dt:this._nextMs-t0});\n\t\t\t}\n\t\t}\n\t}\n\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\n\tset fps(v) {\n\t\tthis._fps = v;\n\t\tthis._gap = 1 / (v || 60) * 1000;\n\t}\n\n\tget time() {\n\t\treturn Date.now() || new Date().getTime();\n\t}\n\n\tstart() {\n\t\tthis._startMs = this.time;\n\t\tthis._nextMs = this._startMs + this._gap;\n\t\tthis._requestId = window.requestAnimationFrame(this._tickHandler);\n\t}\n\n\tstop() {\n\t\twindow.cancelAnimationFrame(this._requestId);\n\t}\n}\n\nexport const TweenMaxTicker = class extends Ticker {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tsetFps() {\n\t\t\n\t}\n\n\tstart() {\n\n\t}\n\n\tstop() {\n\n\t}\n}","import {InteractiveObject} from '../core/InteractiveObject'\n\nexport class Button extends InteractiveObject {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tsetup(dom) {\n\t\tthis.set({target:dom});\n\t}\n\n\tset active(flag) {\n\t\tconst target = this.get('target');\n\t\tif(flag) {\n\t\t\ttarget.classList.remove(\"xslider-disabled\");\n\t\t}\n\t\telse {\n\t\t\ttarget.classList.add(\"xslider-disabled\");\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.active = true;\n\t}\n}","import {EventDispatcher} from '../core/EventDispatcher'\nimport {stage} from '../core/Stage'\nexport class Dom extends EventDispatcher {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._defineHandlers();\n\n\t\t// this.canvas = document.createElement('canvas');\n\t}\n\n\t_defineHandlers() {\n\t\tthis._onResize = (e) => {\n\t\t\tif(this._width != this.width || this._height != this.height) {\n\t\t\t\tthis._width = this.width;\n\t\t\t\tthis._height = this.height;\n\t\t\t\tthis.dispatch('resize', {type:'resize', width:this._width, height:this._height});\n\t\t\t}\n\t\t}\n\t}\n\n\tget width() {\n\t\treturn this.container.clientWidth;\n\t}\n\n\tget height() {\n\t\treturn this.container.clientHeight;\n\t}\n\n\tsetup(selector) {\n\n\t\tthis.container = document.querySelector(selector);\n\t\tthis.container.classList.add(\"xslider-container\");\n\n\t\tthis.view = this.container.querySelector(\".xslider-view\");\n\t\tthis.slides = this.view.querySelectorAll(\".xslider-slide\");\n\n\t\tthis.pager = this.container.querySelector(\".xslider-pager\");\n\t\tthis.prev = this.container.querySelector(\".xslider-prev\");\n\t\tthis.next = this.container.querySelector(\".xslider-next\");\n\n\t\tstage.on('resize', this._onResize);\n\t}\n\n\tdispose() {\n\t\tthis._width = this._height = undefined;\n\t\tstage.off('resize', this._onResize);\n\t\tthis.container.classList.remove(\"xslider-container\", \"xslider-debug\");\n\t}\n}","import {EventDispatcher} from '../core/EventDispatcher'\n\nexport class Pager extends EventDispatcher {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._defineHandlers();\n\t}\n\n\t_defineHandlers() {\n\t\t\n\t\tthis._onClick = (e) => {\n\t\t\tconst index = this.list.indexOf(e.target);\n\t\t\tthis.set({index:index});\n\t\t}\n\n\t\tthis._onChangeIndex = (e) => {\n\t\t\tif(e.value0 !== undefined) {\n\t\t\t\tthis.list[e.value0].classList.remove(\"xslider-active\");\n\t\t\t}\n\n\t\t\tthis.list[e.value].classList.add(\"xslider-active\");\n\t\t}\n\t}\n\n\n\tsetup(data) {\n\t\tthis.container = data.dom.pager;\n\t\tthis.list = [];\n\n\t\tconst length = data.dom.slides.length;\n\n\t\tfor(let i=0; i<length; i++) {\n\t\t\tlet span = document.createElement('span');\n\t\t\tthis.container.appendChild(span);\n\n\t\t\tspan.addEventListener('click', this._onClick);\n\t\t\tthis.list.push(span);\n\t\t}\n\n\t\tthis.on(\"index\", this._onChangeIndex);\n\t\tthis.set({index:data.option.initialSlideIndex});\n\t}\n\n\n\tdispose() {\n\t\tthis.off(\"index\", this._onChangeIndex);\n\t\tthis.set({index:undefined});\n\n\t\tthis.list.forEach((span) => {\n\t\t\tspan.removeEventListener('click', this._onClick);\n\t\t\tthis.container.removeChild(span);\n\t\t})\n\t}\n}","import {net} from '../components/Net'\nimport {cloner} from '../components/converter/Cloner'\nimport {Inliner} from '../components/converter/Inliner'\nimport {converter} from '../components/converter/SvgConverter'\n// import {Bench} from '../components/debug/Bench'\nimport {Option} from '../components/Option'\n\nimport {EventDispatcher} from '../core/EventDispatcher'\n\nexport class Slide {\n\n\tconstructor(slide, debug) {\n\t\tthis.element = slide;\n\t\tthis.debug = debug;\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.image = new Image();\n\t\tthis.layer = {\n\t\t\t\"gl\" : slide.querySelector(\".xslider-layer-gl\")\n\t\t\t, \"ui\" : slide.querySelector(\".xslider-layer-ui\")\n\t\t}\n\n\t\tif(this.debug == Option.Debug.DISPLAY.IMG) {\n\t\t\tthis.element.insertBefore(this.image, this.layer.gl);\n\t\t}\n\n\t\t// this.element.insertBefore(this.canvas, this.layer.gl);\n\n\t\tthis.inlinedNode = undefined;\n\t\tthis.needsResize = false;\n\t}\n\n\tdispose() {\n\t\tthis.layer.gl && this.layer.gl.classList.remove(\"xslider-capture\");\n\t}\n\n\tready() {\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t//\n\t\t\tif(this.inlinedNode) {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\t//texture\n\t\t\telse if(!this.layer.gl) {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tInliner.inlineNode(this.layer.gl).then(inlined => {\n\t\t\t\t\tthis.inlinedNode = inlined;\n\t\t\t\t\t\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\n\t\t\t\t// // Utils.toSvg(this.layer.gl)\n\t\t\t\t// converter.from(this.layer.gl)\n\t\t\t\t// \t.then((svg) => {\n\t\t\t\t// \t\tthis.svg = svg;\n\t\t\t\t// \t\tthis.layer.gl.classList.remove(\"xslider-capture\");\n\t\t\t\t// \t\tthis.needsResize = true;\n\t\t\t\t// \t\t// document.querySelector('#xslider').appendChild(this.svg.documentElement.cloneNode(true));\n\t\t\t\t// \t\tresolve();\n\t\t\t\t// \t});\n\t\t\t}\n\t\t})\n\t}\n\n\n\tloadSvg(w, h) {\n\n\t\tthis.svg = converter.convert(this.inlinedNode, w, h);\n\n\t\tlet string = new XMLSerializer().serializeToString(this.svg);\n\t\t// console.log('string', string)\n\t\t// string = string.replace(/#/g, '%23').replace(/\\n/g, '%0A')\n\t\tconst uri = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(string);\n\n\t\tif(this.debug == Option.Debug.DISPLAY.SVG) {\n\n\t\t\tif(this._svg0 === undefined) {\n\t\t\t\tthis._svg0 = this.element.insertBefore(this.svg.childNodes[0], this.layer.gl);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst node = this.svg.childNodes[0];\n\t\t\t\tthis.element.replaceChild(node, this._svg0);\n\t\t\t\tthis._svg0 = node;\n\t\t\t}\n\t\t}\n\t\treturn net.loadImage(this.image, uri)\n\t}\n\n\n\tresize(w, h) {\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tif(!this.needsResize) {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.needsResize = false;\n\n\t\t\t\tthis.canvas.width = w;\n\t\t\t\tthis.canvas.height = h;\n\n\t\t\t\tif(this.layer.gl) {\n\t\t\t\t\tthis.layer.gl.classList.add(\"xslider-capture\");\n\t\n\t\t\t\t\tcloner.cloneStyle(this.layer.gl, this.inlinedNode, Slide.EXCLUDES);\n\t\n\t\t\t\t\tthis.layer.gl.classList.remove(\"xslider-capture\");\n\n\t\t\t\t\tthis.loadSvg(w, h).then(() => {\n\t\t\t\t\t\tconst c = this.canvas.getContext('2d');\n\t\t\t\t\t\tc.clearRect(0,0,w,h);\n\t\t\t\t\t\tc.drawImage(this.image,0,0,w,h);\n\t\t\t\t\t\t// console.log(this.image, w, h);\n\t\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nSlide.EXCLUDES = ['background', 'left', 'right', 'width', 'height'];\n\nexport class SlideContainer extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._defineHandlers();\n\n\t\tthis.width = this.height = -1;\n\t}\n\n\t_defineHandlers() {\n\t\tthis._onChangeSlide = (e) => {\n\t\t\t// console.log(e);\n\n\t\t\tlet removeOld = false;\n\n\t\t\tswitch(e.type) {\n\t\t\t\tcase 'slide0':\n\t\t\t\t\tthis.updateSlide(0);\n\t\t\t\t\tremoveOld = e.value0 !== undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'slide1':\n\t\t\t\t\tthis.updateSlide(1);\n\t\t\t\t\tremoveOld = e.value0 !== undefined && e.value0 !== this.get('slide0');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(removeOld) {\n\t\t\t\te.value0.element.classList.remove(\"xslider-slide-active\");\n\t\t\t}\n\t\t}\n\t}\n\n\tready(indexer) {\n\t\tconst slide0 = indexer.data.list[indexer.i0]\n\t\tlet slide1 = undefined;\n\n\t\tconst arr = [\n\t\t\tslide0.ready()\n\t\t];\n\n\t\tif(indexer.i1 !== undefined) {\n\t\t\tslide1 = indexer.data.list[indexer.i1];\n\t\t\tarr.push(slide1.ready());\n\t\t}\n\n\t\treturn Promise.all(arr).then(() => {\n\t\t\tthis.set({ slide0:slide0, slide1:slide1 });\n\t\t});\n\t}\n\n\tsetup(mesh) {\n\t\tthis.mesh = mesh;\n\t\tif(this.mesh) {\n\t\t\tthis.uniforms = this.mesh.material.uniforms;\n\t\t}\n\n\t\tthis.on('slide0', this._onChangeSlide);\n\t\tthis.on('slide1', this._onChangeSlide);\n\t}\n\n\tdispose() {\n\t\tthis.off('slide0', this._onChangeSlide);\n\t\tthis.off('slide1', this._onChangeSlide);\n\n\t\tconst slide0 = this.get('slide0');\n\t\tconst slide1 = this.get('slide1');\n\t\tslide0.element.classList.remove(\"xslider-slide-active\");\n\t\tslide1 && slide1.element.classList.remove(\"xslider-slide-active\");\n\t}\n\n\tresize(w, h) {\n\t\tthis.width = w; this.height = h;\n\n\t\tif(this.mesh) {\n\t\t\tthis.uniforms.resolution.value.set(w,h);\n\t\t}\n\n\t\treturn Promise.all([this.updateSlide(0), this.updateSlide(1)]);\n\t}\n\n\tupdateSlide(slideIndex) {\n\t\tif(this.width == -1 && this.height == -1)\treturn;\n\n\t\tconst slide = this.get('slide'+slideIndex);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// console.log(this.uniforms);\n\t\t\t// console.log(this.uniforms.texture0.value.image);\n\t\t\t// console.log(this.uniforms.texture1.value.image);\n\t\t\t// console.log(slide);\n\t\t\t// console.log(slideIndex, this.uniforms.texture0.value.image == this.uniforms.texture1.value.image);\n\n\t\t\tif(!slide)  {\n\t\t\t\tif(this.uniforms) {\n\t\t\t\t\tconst texture = this.uniforms['texture'+slideIndex].value;\n\t\t\t\t\ttexture.image = undefined;\n\t\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}\n\t\n\t\t\tslide.element.classList.add(\"xslider-slide-active\");\n\t\n\t\t\tslide.resize(this.width, this.height)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif(this.uniforms) {\n\t\t\t\t\t\tconst texture = this.uniforms['texture'+slideIndex].value;\n\t\t\t\t\t\ttexture.image = slide.canvas;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t});\n\t}\n}","import {InteractiveObject} from '../core/InteractiveObject'\nimport {Button} from './Button'\nimport {Pager} from './Pager'\n\n\nexport class UI extends InteractiveObject {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\n\t_defineHandlers() {\n\t\tsuper._defineHandlers();\n\n\t\tthis._onPrev = (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.dispatch(UI.EVENT.PREV);\n\t\t}\n\n\t\tthis._onNext = (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.dispatch(UI.EVENT.NEXT);\n\t\t}\n\t}\n\n\n\tsetup(data) {\n\t\tconst dom = data.dom;\n\n\t\tthis.set({target:dom.view});\n\n\t\tif(dom.pager) {\n\t\t\tthis.pager = this.pager || new Pager();\n\t\t\tthis.pager.setup(data);\n\t\t\tthis.pager.on('index', this._on.bubble);\n\t\t}\n\n\t\tif(dom.prev) {\n\t\t\tthis.prev = this.prev || new Button();\n\t\t\tthis.prev.setup(dom.prev);\n\t\t\tthis.prev.on('click', this._onPrev);\n\t\t}\n\n\t\tif(dom.next) {\n\t\t\tthis.next = this.next || new Button();\n\t\t\tthis.next.setup(dom.next);\n\t\t\tthis.next.on('click', this._onNext);\n\t\t}\n\t}\n\n\n\tdispose() {\n\t\tif(this.pager) {\n\t\t\tthis.pager.off('index', this._on.bubble);\n\t\t\tthis.pager.dispose();\n\t\t}\n\n\t\tif(this.prev) {\n\t\t\tthis.prev.off('click', this._offPrev);\n\t\t\tthis.prev.dispose();\n\t\t}\n\t\t\n\t\tif(this.next) {\n\t\t\tthis.next.off('click', this._onNext);\n\t\t\tthis.next.dispose();\n\t\t}\n\t}\n}\n\nUI.EVENT = {\n    PREV:\"ui_prev\",\n    NEXT:\"ui_next\"\n}","import {Material} from '../components/graphics/Material'\nimport {Model} from '../components/graphics/nodes/Node'\nimport {VarFormat} from '../components/graphics/assets/Buffer'\nimport {ShaderVar, ShaderVarFormat} from '../components/graphics/assets/Program'\n\n\nexport class XMaterial extends Material {\n    constructor(option) {\n        super(option);\n\n        this.program.addAttribute(new ShaderVar(\"position\", VarFormat.Float, ShaderVarFormat.Vector2));\n    }\n}\n\n\nexport class XModel extends Model {\n    constructor() {\n        super();\n\n        const vertices = [\n            -1.0, -1.0, \n             1.0, -1.0, \n             1.0,  1.0, \n            -1.0,  1.0, \n        ];\n\n        this.mesh.vertexBuffer.allocate(vertices.length);\n        this.mesh.vertexBuffer.put(vertices);\n\n        const indices = [0, 1, 2, 0, 2, 3];\n        this.mesh.indexBuffer.allocate(indices.length);\n        this.mesh.indexBuffer.put(indices);\n    }\n\n    set material(material) {\n        this.mesh.material = material;\n    }\n}","export class Color {\r\n    constructor() {\r\n        this.r = 0;\r\n        this.g = 0;\r\n        this.b = 0;\r\n        this.a = 1;\r\n    }\r\n\r\n    set(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n}","export class Matrix3 {\n    constructor() {\n        this.identity();\n    }\n\n    identity() {\n        this.data = [1,0,0, 0,1,0, 0,0,1];\n    }\n\n    copy(dst) {\n        for(let i=0; i<this.data.length; i++) {\n            dst.data[i] = this.data.length;\n        }\n    }\n\n    translate() {\n\n    }\n\n    rotate() {\n\n    }\n\n    update(x, y, r, sx, sy) {\n        const s = Math.sin(r);\n        const c = Math.cos(r);\n\n        let data = this.data;\n        data[0] = c * sx;\n        data[1] = s * sx;\n        \n        data[3] = -s * sy;\n        data[4] = c * sy;\n\n        data[6] = x;\n        data[7] = y;\n    }\n}\n\n\nexport class Matrix4 {\n    constructor() {\n        this.identity();\n    }\n\n    identity() {\n        this.data = [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];\n    }\n\n    copy(dst) {\n        for(let i=0; i<this.data.length; i++) {\n            dst.data[i] = this.data.length;\n        }\n    }\n\n    perspective(fov, aspect, near, far) {\n        const n2 = near * 2;\n        fov = fov * Math.PI / 180;\n\n        const nf = 1 / (near - far);\n\n        const T= Math.tan(fov / 2) * near;\n        const B = -T;\n        const L = aspect * B;\n        const R = -L;\n\n        let data = this.data;\n\n        data[0] = n2 / (R - L);\n        data[5] = n2 / (T - B);\n        data[10] = (far + near) * nf;\n        data[11] = -1;\n        data[14] = n2 * far * nf;\n        data[15] = 0;\n    }\n\n    update(x, y, z, rx, ry, rz, sx, sy, sz) {\n        const sinX = Math.sin(rx);\n        const cosX = Math.cos(rx);\n        const sinY = Math.sin(ry);\n        const cosY = Math.cos(ry);\n        const sinZ = Math.sin(rz);\n        const cosZ = Math.cos(rz);\n\n        const sinYsinX = sinY * sinX;\n        const sinYcosX = sinY * cosX;\n\n        let data = this.data;\n\t\n        data[0] = cosZ*cosY * sx;\n        data[1] = sinZ*cosY * sx;\n        data[2] = -sinY * sx;\n        \n        data[4] = (cosZ*sinYsinX-sinZ*cosX) * sy;\n        data[5] = (sinZ*sinYsinX+cosZ*cosX) * sy;\n        data[6] = cosY*sinX * sy;\n        \n        data[8] = (cosZ*sinYcosX+sinZ*sinX) * sz;\n        data[9] = (sinZ*sinYcosX-cosZ*sinX) * sz;\n        data[10] = cosY*cosX * sz;\n    \n        data[12] = x;\n        data[13] = y;\n        data[14] = z;\n    }\n}","export class Vec2 {\n\tconstructor(x=0,y=0) {\n\t\tthis.set(x, y);\n\t}\n\n\tset(x, y) {\n\t\tthis.data = [x,y];\n\t}\n\n\tget x() { return this.data[0]; }\n\tget y() { return this.data[1]; }\n\n\tset x(v) { this.data[0] = v; }\n\tset y(v) { this.data[1] = v; }\n}\n\nexport class Vec3 {\n\tconstructor(x=0,y=0,z=0) {\n\t\tthis.set(x, y, z);\n\t}\n\n\tset(x, y, z) {\n\t\tthis.data = [x,y,z];\n\t}\n\n\tget x() { return this.data[0]; }\n\tget y() { return this.data[1]; }\n\tget z() { return this.data[2]; }\n\n\tset x(v) { this.data[0] = v; }\n\tset y(v) { this.data[1] = v; }\n\tset z(v) { this.data[2] = v; }\n}\n\nexport class Vec4 {\n\tconstructor(x=0,y=0,z=0,w=0) {\n\t\tthis.set(x, y, z, w);\n\t}\n\n\tset(x, y, z, w) {\n\t\tthis.data = [x,y,z,w];\n\t}\n\t\n\n\tset width(v) {\n\t\tthis.data[2] = v;\n\t}\n\n\tget width() {\n\t\treturn this.data[2];\n\t}\n\n\tset height(v) {\n\t\tthis.data[3] = v;\n\t}\n\n\tget height() {\n\t\treturn this.data[3];\n\t}\n\n\tget x() { return this.data[0]; }\n\tget y() { return this.data[1]; }\n\tget z() { return this.data[2]; }\n\tget w() { return this.data[3]; }\n\n\tset x(v) { this.data[0] = v; }\n\tset y(v) { this.data[1] = v; }\n\tset z(v) { this.data[2] = v; }\n\tset w(v) { this.data[3] = v; }\n\n\tequals(v) {\n\t\treturn this.x===v.x&&this.y==v.y&&this.z==v.z&&this.w==v.w;\n\t}\n}","import { Data } from './components/Data'\nimport { SlideController } from './SlideController'\nimport { EventDispatcher } from './core/EventDispatcher'\nimport { Utils } from './components/Utils'\n\n\nexport default class XSlider extends EventDispatcher {\n\tconstructor(...args) {\n\t\tsuper();\n\n\t\tthis.data = new Data();\n\t\tthis.controller = new SlideController();\n\n\t\tUtils.delegate(this, {\n\t\t\tprev: this.controller.prev,\n\t\t\tnext: this.controller.next,\n\t\t\tautoplay: {\n\t\t\t\tstart: this.controller.autoplay.start,\n\t\t\t\tstop: this.controller.autoplay.stop\n\t\t\t}\n\t\t});\n\n\t\tthis.setup(...args);\n\t}\n\n\tsetup(...args) {\n\t\t// console.log('args: ', args);\n\n\t\tthis.dispose();\n\n\t\tthis.data.setup(...args);\n\n\t\tthis.controller.setup(this.renderer, this.data);\n\t}\n\n\tdispose() {\n\t\tthis.controller.dispose();\n\t\tthis.data.dispose();\n\t}\n}\n","import {EventDispatcher} from '../core/EventDispatcher'\n\nexport class BaseRenderer extends EventDispatcher {\n\tconstructor() {\n\t\tsuper();\n\t}\n\t\n\tsetup(data, container) {\n\t\tthis.data = data;\n\t\tthis.container = container;\n\t}\n\n\tdispose() {}\n\n\trender(indexer) {}\n\n\tresize(w, h) {\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t}\n}\n\n\nexport class GLRenderer extends BaseRenderer {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.canvas = document.createElement('canvas');\n\n\t\tthis._defineHandlers();\n\t}\n\n\t_defineHandlers() {\n\t}\n\t\n\tsetup(data, container) {\n\t\tsuper.setup(data, container);\n\n\t\tdata.dom.container.insertBefore(this.canvas, data.dom.view);\n\t}\n\n\tdispose() {\n\t\tsuper.dispose();\n\n\t\tthis.container.off('updateTexture', this._onUpdateTexture);\n\n\t\tthis.data.dom.container.removeChild(this.canvas);\n\t}\n\n\trender(indexer) {\n\t\tsuper.render(indexer);\n\n\t\tthis.container.uniforms.progress.value = indexer.progress;\n\t\tif(this.container.uniforms.time) {\n\t\t\tthis.container.uniforms.time.value = this.data.time;\n\t\t}\n\t}\n\n\tresize(w, h) {\n\t\tsuper.resize(w, h);\n\t}\n}\n","import {BaseRenderer} from './BaseRenderer'\nimport {Utils} from '../components/Utils'\nimport {stage} from '../core/Stage'\n\nexport class DefaultRenderer extends BaseRenderer {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._defineHandlers();\n\t}\n\n\t_defineHandlers() {\n\n\t\tthis.dx = 0;\n\t\tthis._onTick = (e) => {\n\t\t\tconsole.log('e: ', e);\n\n\t\t\tthis.dx = 30 * Math.sin(e.time/1000);\n\n\t\t\tconst slide0 = this.data.list[0];\n\t\t\tif(slide0) {\n\t\t\t\tslide0.layer.ui.style.webkitTransform = \"translate(\"+this.dx+\"px, 0)\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetup(data, container) {\n\t\tsuper.setup(data, container);\n\t}\n\n\tdispose() {\n\t\tsuper.dispose();\n\t}\n\n\trender(indexer) {\n\t\tsuper.render(indexer);\n\n\t\tconst slide0 = this.data.list[indexer.i0]\n\t\t, slide1 = this.data.list[indexer.i1];\n\n\t\tlet opacity = 1.0 - Utils.clamp(indexer.progress,0,0.5) / 0.5;\n\t\tlet dx = -indexer.progress * this.width;\n\t\tthis.updateSlide(slide0, opacity, dx);\n\n\t\tif(slide0 != slide1) {\n\t\t\topacity = Utils.clamp(indexer.progress-0.5,0,0.5) / 0.5;\n\t\t\tdx = (1-indexer.progress) * this.width;\n\t\t\tthis.updateSlide(slide1, opacity, dx);\n\t\t}\n\n\t\t// stage.on(\"tick\", this._onTick);\n\t\t\n\t}\n\n\tresize(w, h) {\n\t\tsuper.resize(w, h);\n\t}\n\n\tupdateSlide(slide, opacity, dx) {\n\n\t\tif(!slide || !slide.layer.ui)  return;\n\n\t\tslide.layer.ui.style.webkitTransform = \"translate(\"+dx+\"px, 0) scale(1)\";\n\t\t// slide.layer.ui.style.opacity = opacity;\n\n\t}\n}","import {GLRenderer} from './BaseRenderer'\n\nimport {GLGraphics} from '../components/graphics/GLGraphics'\nimport {Scene3D} from '../components/graphics/nodes/Scene'\nimport {XModel, XMaterial} from '../display/XModel'\nimport {Texture} from '../components/graphics/assets/Texture'\nimport {Utils} from '../components/Utils'\nimport {Vec2} from '../geom/Vec'\n\nexport class XRenderer extends GLRenderer {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.scene = new Scene3D();\n\t\t// this.scene.context.color.b = 1;\n\t\tthis.model = new XModel();\n\t\tthis.mesh = this.model.mesh;\n\n\t\tthis.scene.addChild(this.model);\n\n\t\tthis._uniform0 = {\n\t\t\ttexture0: { value: new Texture() },\n\t\t\ttexture1: { value: new Texture() },\n\t\t\tprogress:{ value: 0 },\n\t\t\tresolution: { value: new Vec2(0.0, 0.0) },\n\t\t}\n\t}\n\t\n\tsetup(data, container) {\n\t\tsuper.setup(data, container);\n\n\t\tGLGraphics.setup(this.canvas);\n\n\t\tconst transition = data.option.transition;\n\n\t\tthis.mesh.material = new XMaterial({\n            vertexShader:transition.vertexShader, \n            fragmentShader:transition.fragmentShader,\n            uniforms: Utils.extend(transition.uniforms, this._uniform0)\n\t\t});\n\t}\n\n\tdispose() {\n\t\tsuper.dispose();\n\n\t\tGLGraphics.deleteProgram(this.mesh.material.program);\n\t\tthis.mesh.material = undefined;\n\t}\n\n\trender(indexer) {\n\t\tsuper.render(indexer);\n\t\t\n\t\tGLGraphics.clear(this.scene.context);\n\t\tGLGraphics.renderModel(this.model);\n\t}\n\n\tresize(w, h) {\n\t\tsuper.resize(w, h);\n\n\t\tthis.canvas.setAttribute(\"width\", w);\n\t\tthis.canvas.setAttribute(\"height\", h);\n\n\t\tthis.scene.camera.setViewport(0,0,w,h);\n\t}\n}","import {Utils} from '../components/Utils'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n\nexport const BaseTransition = {\n\n\tvertexShader: `\nattribute vec2 position;\n\nvoid main(void) {\n\tgl_Position = vec4(position, 0.0, 1.0);\n}\n`,\n\n\tfragmentShader : `\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 uv = gl_FragCoord.xy /resolution.xy;\n\tvec4 color0 = texture2D(texture0, uv);\n\tvec4 color1 = texture2D(texture1, uv);\n\tfloat v = smoothstep(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-uv.x)*gradient.x+uv.y*gradient.y));\n\tgl_FragColor = mix(color0, color1, v);\n}\n`,\n\n\tuniforms: {\n\t\tgradient: { value: new Vec2(1.0, 1.0) },\n\t},\n\n\textend(o) {\n\t\treturn Utils.extend(this, o);\n\t}\n}\n\n","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n/**\n * It's based on {@link https://gl-transitions.com/editor/crosswarp crosswarp by Eke Pter}.\n */\nexport const CrossWarpTransition = BaseTransition.extend({\n\nfragmentShader : `\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tfloat v = mix(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-p.x)*gradient.x+p.y*gradient.y));\n\tv = clamp(v, 0.0, 1.0);\n\n\tvec2 p0 = p;\n\tvec2 p1 = p;\n\n\tp0 -= 0.5;\n\tp0 *= (1.0 - v);\n\tp0 += 0.5;\n\n\tp1 -= 0.5;\n\tp1 *= v;\n\tp1 += 0.5;\n\n\tvec4 color0 = texture2D(texture0, p0);\n\tvec4 color1 = texture2D(texture1, p1);\n\n\tgl_FragColor = mix(color0, color1, v);\n}\n`,\n\n\tuniforms: {\n\t\tgradient: { value: new Vec2(0.5, 0.5) },\n\t}\n});","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n/**\n * It's based on {@link https://gl-transitions.com/editor/CrossZoom CrossZoom by rectalogic}.\n */\nexport const CrossZoomTransition = BaseTransition.extend({\n\nfragmentShader : `\nprecision highp float;\n\n#define PI 3.141592653589793\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\nuniform float strength;\n\n\nfloat Linear_ease(in float begin, in float change, in float duration, in float time) {\n    return change * time / duration + begin;\n}\n\nfloat Exponential_easeInOut(in float begin, in float change, in float duration, in float time) {\n    if (time == 0.0)\n        return begin;\n    else if (time == duration)\n        return begin + change;\n    time = time / (duration / 2.0);\n    if (time < 1.0)\n        return change / 2.0 * pow(2.0, 10.0 * (time - 1.0)) + begin;\n    return change / 2.0 * (-pow(2.0, -10.0 * (time - 1.0)) + 2.0) + begin;\n}\n\nfloat Sinusoidal_easeInOut(in float begin, in float change, in float duration, in float time) {\n    return -change / 2.0 * (cos(PI * time / duration) - 1.0) + begin;\n}\n\n/* random number between 0 and 1 */\nfloat hash(in vec3 scale, in float seed) {\n    /* use the fragment position for randomness */\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvec3 crossFade(in vec2 uv, in float dissolve) {\n    return mix(texture2D(texture0, uv).rgb, texture2D(texture1, uv).rgb, dissolve);\n}\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tvec2 center = vec2(Linear_ease(0.25, 0.5, 1.0, progress), 0.5);\n\tfloat dissolve = Exponential_easeInOut(0.0, 1.0, 1.0, progress);\n\tfloat strength = Sinusoidal_easeInOut(0.0, strength, 0.5, progress);\n\tvec3 color = vec3(0.0);\n\tfloat total = 0.0;\n\tvec2 toCenter = center - p;\n\tfloat offset = hash(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n\tfor (float t = 0.0; t <= 40.0; t++) {\n\t  float percent = (t + offset) / 40.0;\n\t  float weight = 4.0 * (percent - percent * percent);\n\t  color += crossFade(p + toCenter * percent * strength, dissolve) * weight;\n\t  total += weight;\n\t  gl_FragColor = vec4(color / total, 1.0);\n\t}\n}\n`,\n\n\tuniforms: {\n\t\tstrength:{ value: 1.0 },\n\t}\n\n});","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n\n/**\n * It's based on {@link https://gl-transitions.com/editor/cube cube by gre}.\n */\nexport const CubeTransition = BaseTransition.extend({\n\nfragmentShader : `\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec4 bgColor;\n\nuniform float floating;\nuniform float unzoom;\nuniform float perspective;\nuniform float reflection;\n\n\nvec2 project (vec2 p) {\n  return p * vec2(1.0, -1.2) + vec2(0.0, -floating/100.0);\n}\n\nbool inBounds (vec2 p) {\n  return all(lessThan(vec2(0.0), p)) && all(lessThan(p, vec2(1.0)));\n}\n\n/**\n * persp 0-1 1:\n * center 1.0:from 0.0:to\n */\nvec2 xskew (vec2 p, float persp, float center) {\n  float x = mix(p.x, 1.0-p.x, center);\n  float d = distance(center, 0.5);\n  return (\n    (vec2( x, (p.y - 0.5 * (1.0 - persp) * x) / (1.0 + (persp - 1.0) * x)) - vec2(0.5 - d, 0.0))\n    * vec2(0.5 / d * -sign(center-0.5), 1.0)\n    + vec2(center, 0.0)\n  );\n}\n\nvoid main(void) {\n\tvec2 uv = gl_FragCoord.xy /resolution.xy;\n\n\tfloat uz = unzoom * 2.0 * (0.5 - distance(0.5, progress));\n\tvec2 p = -uz * 0.5 + (1.0 + uz) * uv;\n\n\tvec2 fromP, toP;\n\n\tfromP = xskew(\n\t\tp / vec2(1.0-progress, 1.0),\n\t\tmix(1.0-progress, 1.0, perspective),\n\t\t1.0\n\t);\n\n\ttoP = xskew(\n\t\t(p - vec2(1.0-progress, 0.0)) / vec2(progress, 1.0),\n\t\t1.0 - mix(1.0-progress, 0.0, perspective),\n\t\t0.0\n\t);\n\n\tif (inBounds(fromP)) {\n\t\tgl_FragColor = texture2D(texture0, fromP);\n\t}\n\telse if (inBounds(toP)) {\n\t\tgl_FragColor = texture2D(texture1, toP);\n\t}\n\telse {\n\t\tfromP = project(fromP);\n\t\ttoP = project(toP);\n\n\t\tvec4 color0 = texture2D(texture0, fromP);\n\t\tvec4 color1 = texture2D(texture1, toP);\n\n\t\tgl_FragColor = bgColor\n\t\t\t+ float(inBounds(fromP)) * mix(bgColor, color0, reflection * mix(1.0, 0.0, fromP.y))\n\t\t\t+ float(inBounds(toP)) * mix(bgColor, color1, reflection * mix(1.0, 0.0, toP.y));\n\t}\n\n\n\n\n}\n`,\n\n\tuniforms: {\n\t\tbgColor: { value: new Vec4(0.1, 0.1, 0.1, 1.0) },\n\t\tunzoom:{ value: 0.3 },\n\t\tfloating:{ value: 3.0 },\n\t\tperspective:{ value: 0.7 },\n\t\treflection:{ value: 0.4 },\n\t}\n});","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n/**\n * It's based on {@link https://gl-transitions.com/editor/morph morph by paniq}.\n */\nexport const MorphTransition = BaseTransition.extend({\n\nfragmentShader : `\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\nuniform float strength;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\tvec2 oa = (((c0.rg + c0.b) * 0.5) * 2.0 - 1.0);\n\tvec2 ob = (((c1.rg + c1.b) * 0.5) * 2.0 - 1.0);\n\tvec2 oc = mix(oa,ob,0.5)*strength;\n\n\t// float v = smoothstep(0.0, 1.0, progress * (1.0+fade.x+fade.y) - ((1.0-p.x)*fade.x+p.y*fade.y));\n\tfloat v = progress;\n\n\tc0 = texture2D(texture0, p + oc * v);\n\tc1 = texture2D(texture1, p - oc * (1.0 - v));\n\n\tgl_FragColor = mix(c0, c1, v);\n}\n`,\n\n\tuniforms: {\n\t\tstrength: { value: 1.0 },\n\t}\n});","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n/**\n * It's based on {@link https://logik-matchbook.org/shader/crok_transitions crok_transitions by Gatan Renaudeau}.\n */\nexport const NoiseTransition = BaseTransition.extend({\n\n    fragmentShader : `\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\n\nuniform float dark_low, dark_high, light_low, light_high;\nuniform float brightness, contrast, saturation;\nuniform vec3 light_tint, dark_tint;\n\nuniform float rgbOffsetOpt;\nuniform float horzFuzzOpt;\nuniform float zoom;\nuniform float time;\n\nuniform float t_amount, exposure;\n\nconst vec3 lumc = vec3(0.2125, 0.7154, 0.0721);\nconst vec3 avg_lum = vec3(0.5, 0.5, 0.5);\n\n\nvec3 tint(vec3 col)\n{\n\tfloat bri = (col.x + col.y + col.z)/3.0;\n\n\tfloat v = smoothstep(dark_low, dark_high, bri);\n\tcol = mix(dark_tint * bri, col, v);\n\n\tv = smoothstep(light_low, light_high, bri);\n\tcol = mix(col, min(light_tint * col, 1.0), v);\n\n\tvec3 intensity = vec3(dot(col.rgb, lumc));\n\tvec3 sat_color = mix(intensity, col.rgb, saturation);\n\tvec3 con_color = mix(avg_lum, sat_color, contrast);\n\t\n\treturn (con_color - 1.0 + brightness) * exposure;\n}\n\n// Noise generation functions borrowed from:\n// https://github.com/ashima/webgl-noise/blob/master/src/noise2D.glsl\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n\t// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n\t// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n\t// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n\t// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n\t// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n\t// Normalise gradients implicitly by scaling m\n\t// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n\t// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvoid main(void) {\n\n\tvec2 p =  gl_FragCoord.xy/resolution.xy;\n\tvec2 p0 = p;\n\tvec2 p1 = p;\n\n\tp0 -= 0.5;\n\tp1 -= 0.5;\n\tp0 *= 1.0 - progress * zoom;\n\tp1 *= 1.0 - (1.0 - progress) * zoom;\n\tp0 += 0.5;\n\tp1 += 0.5;\n\n\tfloat v = min(progress, 1.0 - progress) * 2.0;\t//0.0-1.0\n\n\tfloat fuzzOffset = snoise(vec2(time*15.0, p.y * 20.0)) * 0.0015;\n\tfloat largeFuzzOffset = snoise(vec2(time*1.0, p.y * 1.0)) * (0.003 + v * 0.01);\n\tfloat f_xoff = (fuzzOffset + largeFuzzOffset) * horzFuzzOpt * progress;\n    float b_xoff = (fuzzOffset + largeFuzzOffset) * horzFuzzOpt * (1.0 - progress);\n    \n    // float rgbOffset = rgbOffsetOpt * fuzzOffset * 300.0;\n    // float rgbOffset = rgbOffsetOpt;\n    float rgbOffset = snoise(vec2(time*15.0, 1.0)) * rgbOffsetOpt;\n\n\tvec3 f_col = vec3(\n\t\ttexture2D(texture0,\tvec2(p0.x + f_xoff -0.01 * rgbOffset * progress, p0.y)).r,\n\t\ttexture2D(texture0, vec2(p0.x + f_xoff,\t  p0.y)).g,\n\t\ttexture2D(texture0, vec2(p0.x + f_xoff +0.01 * rgbOffset * progress, p0.y)).b\n\t);\n\n\tvec3 b_col = vec3(\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff -0.01 * rgbOffset * (1.0 - progress), p1.y)).r,\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff,\t  p1.y)).g,\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff +0.01 * rgbOffset * (1.0 - progress), p1.y)).b\n\t);\n\n\tvec3 ff_col = f_col;\n\tff_col = tint(ff_col);\n\tff_col = mix(f_col, ff_col, t_amount * progress);\n\n\tvec3 bb_col = b_col;\n\tbb_col = tint(bb_col);\n\tbb_col = mix(b_col, bb_col, t_amount * (1.0 - progress));\n\n\tgl_FragColor = vec4(mix(ff_col, bb_col, progress), 1.0);\n}\n`,\n\n\tuniforms: {\n\t\ttime:{ value: 0 },\n\t\t\n\t\tzoom:{ value: 0.3 },\n\n\t\tdark_low:{ value: 100 },\n\t\tdark_high:{ value: 200 },\n\t\tdark_low:{ value: 200 },\n\t\tdark_high:{ value: 255 },\n\t\tcontrast:{ value: 1 },\n\t\tbrightness:{ value: 1 },\n\t\tsaturation:{ value: 100 },\n\t\tlight_tint: { value: new Vec3(0.5, 0.5, 0.5) },\n\t\tdark_tint: { value: new Vec3(0.2, 0.2, 0.2) },\n\t\tt_amount:{ value: 0.5 },\n\t\texposure:{ value: 30 },\n\t\thorzFuzzOpt:{ value: 10 },\n\t\trgbOffsetOpt:{ value: 20 },\n\t}\n\n});","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n\n\nexport const PixelateTransition = BaseTransition.extend({\n\nfragmentShader : `\nprecision highp float;\n\n\n#define N 10.0\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution;\t//0.0-1.0\n\tfloat aspect = resolution.x / resolution.y;\n\tfloat v = min(progress, 1.0 - progress) * 2.0;\t//0.0-1.0\n\tv = floor(v * 30.0) / 30.0;\n\n\tif(v > 0.0) {\n\t\tvec2 steps = vec2(aspect, 1.0) * N / v;\n\t\n\t\tp -= 0.5;\n\t\n\t\tsteps = min(steps, resolution.xy);\n\t\tp = (floor(p * steps) + 0.5) / steps;\n\t\n\t\tp += 0.5;\n\t}\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\tgl_FragColor = mix(c0, c1, progress);\n}\n`,\n\n\tuniforms: {\n\t}\n});\n\n\n","import {BaseTransition} from './BaseTransition'\nimport {Vec2, Vec3, Vec4} from '../geom/Vec'\n\n\n\nexport const PixelateWipeTransition = BaseTransition.extend({\n\nfragmentShader : `\n\nprecision highp float;\n\n#define N 10.0\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution;\n\tfloat aspect = resolution.x / resolution.y;\n\n\tfloat v = mix(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-p.x)*gradient.x+p.y*gradient.y));\n\tv = clamp(v, 0.0, 1.0);\n\tv = floor(v * 16.0) / 16.0;\n\n\tif(v!=0.0) {\n\t\tp -= 0.5;\n\t\n\t\tfloat pv = min(v, 1.0 - v) * 2.0;\t//0.0-1.0\n\t\tvec2 steps = vec2(aspect, 1.0) * N / pv;\n\t\tsteps = min(steps, resolution.xy);\n\t\tp = (floor(p * steps) + 0.5) / steps;\n\t\n\t\tp += 0.5;\n\t}\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\t// v = step(0.5, v);\n\n\tgl_FragColor = mix(c0, c1, v);\n}\n`,\n\n\tuniforms: {\n\t\tgradient: { value: new Vec2(0.5, 0) },\n\t}\n});\n\n\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './xslider.scss';\n// const XSlider = require('./modules/main.js').default;\n// const XSlider = require('./modules/main.js')\nimport XSlider from './modules/main.js'\nimport { stage } from './modules/core/Stage.js'\nimport { BaseTransition } from './modules/transitions/BaseTransition'\nimport { CrossWarpTransition } from './modules/transitions/CrossWarpTransition'\nimport { CrossZoomTransition } from './modules/transitions/CrossZoomTransition'\nimport { CubeTransition } from './modules/transitions/CubeTransition'\nimport { MorphTransition } from './modules/transitions/MorphTransition'\nimport { NoiseTransition } from './modules/transitions/NoiseTransition'\nimport { PixelateTransition } from './modules/transitions/PixelateTransition'\nimport { PixelateWipeTransition } from './modules/transitions/PixelateWipeTransition'\nimport { Option } from './modules/components/Option'\nimport { Utils } from './modules/components/Utils'\nimport { Vec2, Vec3, Vec4 } from './modules/geom/Vec'\nimport { Matrix3, Matrix4 } from './modules/geom/Matrix'\n\n//exports\nXSlider.stage = stage;\n\nXSlider.BaseTransition = BaseTransition;\nXSlider.CrossWarpTransition = CrossWarpTransition;\nXSlider.CrossZoomTransition = CrossZoomTransition;\nXSlider.CubeTransition = CubeTransition;\nXSlider.MorphTransition = MorphTransition;\nXSlider.NoiseTransition = NoiseTransition;\nXSlider.PixelateTransition = PixelateTransition;\nXSlider.PixelateWipeTransition = PixelateWipeTransition;\n\nXSlider.Vec2 = Vec2;\nXSlider.Vec3 = Vec3;\nXSlider.Vec4 = Vec4;\nXSlider.Matrix3 = Matrix3;\nXSlider.Matrix4 = Matrix4;\n\nXSlider.Utils = Utils;\nXSlider.Debug = Option.Debug;\n\nif (typeof window !== 'undefined') {\n  window.XSlider = XSlider;\n} else if (typeof global !== 'undefined') {\n  global.XSlider = XSlider;\n}\n\n// window.XSlider = XSlider;\n// export { XSlider }\n// export XSlider\nexport default XSlider;\n// exports { XSlider };\n// module.exports = XSlider"],"sourceRoot":""}