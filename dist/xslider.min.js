!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTransition=void 0;var r=n(2);t.BaseTransition={vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 uv = gl_FragCoord.xy /resolution.xy;\n\tvec4 color0 = texture2D(texture0, uv);\n\tvec4 color1 = texture2D(texture1, uv);\n\tfloat v = smoothstep(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-uv.x)*gradient.x+uv.y*gradient.y));\n\tgl_FragColor = mix(color0, color1, v);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},uv0:{value:new THREE.Vector4(0,0,1,1)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},uv1:{value:new THREE.Vector4(0,0,1,1)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},gradient:{value:new THREE.Vector2(1,1)}},extend:function(e){return r.Utils.extend(this,e)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.EventDispatcher=function(){function e(){r(this,e),this._listeners={},this._properties={}}return i(e,[{key:"get",value:function(e){return this._properties[e]}},{key:"set",value:function(e){if(e)for(var t in e)if(void 0==this._properties[t]||this._properties[t]!=e[t]){var n=this._properties[t];this._properties[t]=e[t],this.dispatch(t,{type:t,value:this._properties[t],value0:n})}}},{key:"dispatch",value:function(e,t){if(this._listeners.hasOwnProperty(e)){var n=!0,r=!1,i=void 0;try{for(var o,a=this._listeners[e][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=t||{type:e};s.listener(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}},{key:"on",value:function(e,t){return this.off(e,t),this._listeners.hasOwnProperty(e)||(this._listeners[e]=[]),this._listeners[e].push({type:e,listener:t}),this}},{key:"off",value:function(e,t){var n=this;if(e)t?this._listeners.hasOwnProperty(e)&&(this._listeners[e].some(function(r,i){r.listener==t&&n._listeners[e].splice(i,1)}),0==this._listeners[e].length&&delete this._listeners[e]):delete this._listeners[e];else for(var r in this._listeners)delete this._listeners[r];return this}},{key:"listeners",get:function(){return this._listeners}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils={extend:function(e,t){var n={};Object.assign(n,e);var r=Object.entries(t),i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n[l[0]]=l[1]}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n},delegate:function(e,t){var n=Object.entries(t),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;e[u[0]]=u[1]}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},getQuery:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._query||!t){this._query={};for(var n=window.location.search.substring(1),r=n.split("&"),i=0;i<r.length;i++){var o=r[i].split("="),a=decodeURIComponent(o[0]),s=decodeURIComponent(o[1]);this._query[a]=s}}return this._query[e]}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.stage=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=(n(4),n(6)),l=(n(5),n(20)),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.ticker=new l.Ticker,e.set({target:window}),e}return o(t,e),a(t,[{key:"ready",value:function(){return new Promise(function(e,t){var n=function t(){document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t),e()};"complete"===document.readyState?e():(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))})}},{key:"_autoAddListener",value:function(e,n){if(e&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoAddListener",this).call(this,e,n),1==this._listeners[n].length))switch(n){case"tick":this.ticker.on(n,this._on.bubble),this.ticker.start();break;case"resize":e.addEventListener(n,this._on.bubble)}}},{key:"_autoRemoveListener",value:function(e,n){if(e&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_autoRemoveListener",this).call(this,e,n),!this._listeners[n]||0==this._listeners[n].length))switch(n){case"tick":this.ticker.off(n,this._on.bubble),this.ticker.stop();break;case"resize":e.removeEventListener(n,this._on.bubble)}}},{key:"width",get:function(){return window.innerWidth||document.documentElement.clientWidth||0}},{key:"height",get:function(){return window.innerHeight||document.documentElement.clientHeight||0}}]),t}(u.InteractiveObject);t.stage=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchEvent=t.Event=void 0;var r=n(5),i=(t.Event={CHANGE:"change"},[]);r.env.support.touch?i.push("touchstart","touchmove","touchend"):r.env.support.pointer?i.push("pointerdown","pointermove","pointerup"):r.env.support.MSPointer?i.push("MSPointerDown","MSPointerMove","MSPointerUp"):i.push("mousedown","mousemove","mouseup"),t.TouchEvent={START:i[0],MOVE:i[1],END:i[2]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return console.info("xslider ver.","1.0.0"),THREE||console.error("xslider depend on three.js"),e}return o(t,e),a(t,[{key:"support",get:function(){return t.support}}]),t}(s.EventDispatcher);u.support={touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,pointer:window.navigator.pointerEnabled,MSPointer:window.navigator.msPointerEnabled},t.env=new u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveObject=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=n(5),l=n(4),c=n(1);t.InteractiveObject=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e.on("target",e._on.changeTarget),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._on={bubble:function(t){e.dispatch(t.type,t)},changeTarget:function(t){if(t.value0)for(var n in e._listeners)e._autoRemoveListener(t.value0,n);e.off()},touch:function(t){if(u.env.support.touch){var n=t.touches[0];n?(t.clientX=n.clientX,t.clientY=n.clientY):(t.clientX=e.clientX0,t.clientY=e.clientY0)}e.clientX0||(e.clientX0=t.clientX,e.clientY0=t.clientY),t.clientX0=e.clientX0,t.clientY0=e.clientY0,e.clientX0=t.clientX,e.clientY0=t.clientY,e.dispatch(t.type,t)},touchStart:function(t){e.clientX0=e.clientY0=void 0}}}},{key:"dispose",value:function(){this.off()}},{key:"on",value:function(e,n,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this,e,n,r);var i=this.get("target");return this._autoAddListener(i,e),this}},{key:"off",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"off",this).call(this,e,n);var r=this.get("target");return this._autoRemoveListener(r,e),this}},{key:"_autoAddListener",value:function(e,t){if(e&&1==this._listeners[t].length){switch(t){case l.TouchEvent.START:case l.TouchEvent.MOVE:case l.TouchEvent.END:e.addEventListener(t,this._on.touch);break;case"click":e.addEventListener(t,this._on.bubble)}t==l.TouchEvent.MOVE&&e.addEventListener(l.TouchEvent.START,this._on.touchStart)}}},{key:"_autoRemoveListener",value:function(e,t){if(e&&(!this._listeners[t]||0==this._listeners[t].length)){switch(t){case l.TouchEvent.START:case l.TouchEvent.MOVE:case l.TouchEvent.END:e.removeEventListener(t,this._on.touch);break;case"click":e.removeEventListener(t,this._on.bubble)}t==l.TouchEvent.MOVE&&e.removeEventListener(l.TouchEvent.START,this._on.touchStart)}}}]),t}(c.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(t.Bench=function(){function e(){r(this,e)}return i(e,null,[{key:"start",value:function(t,n){var r=void 0!=n?"start-"+n:"start";console.log(t,r),e.list[t]=e.time}},{key:"check",value:function(t,n){var r=void 0!=n?"check-"+n:"check",i=e.time-e.list[t];console.log(t,r,i)}},{key:"end",value:function(t,n){var r=void 0!=n?"end-"+n:"end",i=e.time-e.list[t];console.log(t,r,i),delete e.list[t]}},{key:"time",get:function(){return Date.now()||(new Date).getTime()}}]),e}()).list={}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"construcor",value:function(){}},{key:"loadImage",value:function(e,t){return new Promise(function(n,r){e.src=t,function t(){e.complete?n():setTimeout(t,10)}()})}},{key:"get",value:function(e,t){return new Promise(function(n,r){var i=function(){switch(a.readyState){case 4:200==a.status||304==a.status?n(a.response):r()}},o=function(){r()},a=new XMLHttpRequest;a.onreadystatechange=i,a.ontimeout=o,a.responseType=t,a.timeout=3e4,a.open("GET",e,!0),a.send(null)})}},{key:"getDataURI",value:function(e){return this.get(e,"blob").then(this.readBlob)}},{key:"readBlob",value:function(e){var t=new FileReader;return new Promise(function(n,r){t.onloadend=function(){n(t.result)},t.readAsDataURL(e)})}}]),e}();t.net=new o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"cloneNode",value:function(e){var t=this,n=e.cloneNode(!1);return new Promise(function(r,i){if(e.hasChildNodes()){var o=e.childNodes,a=window.getComputedStyle(e);n.style.cssText=a.cssText;var s=[];o.forEach(function(e,r,i){var o=t.cloneNode(e).then(function(e){n.appendChild(e)});s.push(o)}),Promise.all(s).then(function(){r(n)})}else r(n)})}},{key:"copyStyleExcludeBackground",value:function(e,t){var n=this;if(!(e instanceof Element))return t;var r=window.getComputedStyle(e),i=t.style.getPropertyValue("background");if(t.style.cssText=r.cssText,i&&t.style.setProperty("background",i),!e.hasChildNodes())return t;e.childNodes.forEach(function(e,r,i){n.copyStyleExcludeBackground(e,t.childNodes[r])})}}]),e}();t.cloner=new o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Inliner=void 0;var r=n(9),i=n(8);t.Inliner={URL_REGEX:/url\(['"]?([^'"]+?)['"]?\)/g,resolveFonts:function(){var e=this;return new Promise(function(t,n){if(e.inlinedFontString)t();else{var r=e.readFontRules().map(function(e){return e.cssText});e.inlineFonts(r).then(function(n){e.inlinedFontString=n.join(" "),t()})}})},readFontRules:function(){for(var e=[],t=document.styleSheets,n=0;n<t.length;n++){var r=t[n];if(r.cssRules)for(var i=0;i<r.cssRules.length;i++){var o=r.cssRules[i];o.type===CSSRule.FONT_FACE_RULE&&e.push(o)}}return e},inlineFonts:function(e){var t=this,n=e.map(function(e){return t._inline(e)});return Promise.all(n)},inlineNode:function(e){return r.cloner.cloneNode(e).then(this.inlineImage.bind(this))},_inline:function(e){var t=this.searchUrls(e),n=[];return t.map(function(t){var r=i.net.getDataURI(t).then(function(n){e=e.replace(t,n)});n.push(r)}),Promise.all(n).then(function(){return e})},searchUrls:function(e){for(var t=this,n=[],r=void 0;null!==(r=this.URL_REGEX.exec(e));)n.push(r[1]);return n.filter(function(e){return t.isDataURI(e)})},inlineImage:function(e){var t=this;return new Promise(function(n,r){Promise.resolve(e).then(t.inlineImageElement.bind(t)).then(t.inlineBackgroundImage.bind(t)).then(function(){if(e.hasChildNodes()){var r=e.childNodes,i=[];r.forEach(function(e,n,r){var o=t.inlineImage(e);i.push(o)}),Promise.all(i).then(function(){n(e)})}else n(e)})})},inlineImageElement:function(e){return e instanceof HTMLImageElement?(this.isDataURI(e.src),e):e},inlineBackgroundImage:function(e){if(!(e instanceof Element))return e;var t=e.style.getPropertyValue("background");return t?this._inline(t).then(function(t){return e.style.setProperty("background",t),e}):e},isDataURI:function(e){return-1===e.search(/^(data:)/)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultRenderer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=n(12),l=n(2);n(3),t.DefaultRenderer=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this.dx=0,this._onTick=function(t){console.log("e: ",t),e.dx=30*Math.sin(t.time/1e3);var n=e.data.list[0];n&&(n.layer.ui.style.webkitTransform="translate("+e.dx+"px, 0)")}}},{key:"setup",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this,e)}},{key:"dispose",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"render",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e);var n=this.data.list[e.i0],r=this.data.list[e.i1],i=1-l.Utils.clamp(e.progress,0,.5)/.5,o=-e.progress*this.width;this.updateSlide(n,i,o),n!=r&&(i=l.Utils.clamp(e.progress-.5,0,.5)/.5,o=(1-e.progress)*this.width,this.updateSlide(r,i,o))}},{key:"resize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this,e)}},{key:"updateSlide",value:function(e,t,n){e&&e.layer.ui&&(e.layer.ui.style.webkitTransform="translate("+n+"px, 0) scale(1)")}}]),t}(u.BaseRenderer)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1);t.BaseRenderer=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"setup",value:function(e){this.data=e}},{key:"dispose",value:function(){}},{key:"render",value:function(e){}},{key:"resize",value:function(e){this.width=e.width,this.height=e.height}}]),t}(s.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(6);t.Button=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"setup",value:function(e){this.set({target:e})}},{key:"dispose",value:function(){this.active=!0}},{key:"active",set:function(e){var t=this.get("target");e?t.classList.remove("xslider-disabled"):t.classList.add("xslider-disabled")}}]),t}(s.InteractiveObject)},function(e,t,n){"use strict";n(15);var r=n(16),i=n(3),o=n(0),a=n(30),s=n(31),u=n(32),l=n(33),c=n(34),f=n(35),p=n(36),h=n(37),d=n(2);r.XSlider.stage=i.stage,r.XSlider.transition={Base:o.BaseTransition,CrossWarp:a.CrossWarpTransition,CrossZoom:s.CrossZoomTransition,Cube:u.CubeTransition,Morph:l.MorphTransition,Noise:c.NoiseTransition,Pixelate:f.PixelateTransition,PixelateWipe:p.PixelateWipeTransition,Test:h.TestTransition},r.XSlider.Utils=d.Utils,window.XSlider=r.XSlider},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.XSlider=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),u=n(25),l=n(1),c=n(2);t.XSlider=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.data=new s.Data,e.controller=new u.SlideController,c.Utils.delegate(e,{prev:e.controller.prev,next:e.controller.next,autoplay:{start:e.controller.autoplay.start,stop:e.controller.autoplay.stop}}),e.setup.apply(e,arguments),e}return o(t,e),a(t,[{key:"setup",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log("args: ",n),(e=this.data).setup.apply(e,n),this.controller.setup(this.renderer,this.data)}},{key:"dispose",value:function(){this.controller.dispose(),this.data.dispose()}}]),t}(l.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(18),a=n(2),s=n(19),u=n(21),l=n(11),c=n(23);t.Data=function(){function e(){r(this,e),this.dom=new s.Dom,this.time=0}return i(e,[{key:"setup",value:function(){this.option=a.Utils.extend(o.Option,arguments.length<=0?void 0:arguments[0]),this.dom.setup(this.option.selector),this.list=[];var e=!0,t=!1,n=void 0;try{for(var r,i=this.dom.slides[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;this.list.push(new u.Slide(s))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.list[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.dispose()}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.dom.dispose()}},{key:"getRenderer",value:function(){return this.option.debug?new l.DefaultRenderer:this.option.renderer||new c.ThreeRenderer}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0;var r=n(0);t.Option={selector:"#xslider",initialSlideIndex:0,autoplay:!1,loop:!0,touchMove:{throwable:!0},renderer:void 0,debug:!1,getTransition:function(){return r.BaseTransition},get:function(e,t){return t?this[t]?this[t][e]:void 0:this[e]}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(3);t.Dom=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._onResize=function(t){e.width==e.container.clientWidth&&e.height==e.container.clientHeight||(e.width=e.container.clientWidth,e.height=e.container.clientHeight,e.dispatch("resize",{type:"resize",width:e.width,height:e.height}))}}},{key:"setup",value:function(e){this.container=document.querySelector(e),this.container.classList.add("xslider-container"),this.view=this.container.querySelector(".xslider-view"),this.slides=this.view.querySelectorAll(".xslider-slide"),this.pager=this.container.querySelector(".xslider-pager"),this.prev=this.container.querySelector(".xslider-prev"),this.next=this.container.querySelector(".xslider-next"),u.stage.on("resize",this._onResize)}},{key:"dispose",value:function(){this.width=this.height=void 0,u.stage.off("resize",this._onResize),this.container.classList.remove("xslider-container")}}]),t}(s.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TweenMaxTicker=t.Ticker=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=t.Ticker=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fps=30,e._defineFunctions(),e}return o(t,e),a(t,[{key:"_defineFunctions",value:function(){for(var e=this,t=["ms","moz","webkit","o"],n=t.length;--n>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];this._tickHandler=function(){e._requestId=window.requestAnimationFrame(e._tickHandler),e._lastMs=e.time;var t=e._lastMs-e._nextMs;if(t>=0){var n=e._nextMs;e._nextMs+=t+(t>=e._gap?1:e._gap-t),e.dispatch("tick",{type:"tick",time:e._lastMs-e._startMs,dt:e._nextMs-n})}}}},{key:"start",value:function(){this._startMs=this.time,this._nextMs=this._startMs+this._gap,this._requestId=window.requestAnimationFrame(this._tickHandler)}},{key:"stop",value:function(){window.cancelAnimationFrame(this._requestId)}},{key:"fps",get:function(){return this._fps},set:function(e){this._fps=e,this._gap=1/(e||60)*1e3}},{key:"time",get:function(){return Date.now()||(new Date).getTime()}}]),t}(s.EventDispatcher);t.TweenMaxTicker=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"setFps",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){}}]),t}(u)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Slide=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=n(9),s=n(10),u=n(22);n(7),t.Slide=function(){function e(t){r(this,e),this.container=t,this.canvas=document.createElement("canvas"),this.image=new Image,this.layer={texture:t.querySelector(".xslider-layer-texture"),ui:t.querySelector(".xslider-layer-ui")},this.needsResize=!1,this.tag=this.layer.ui.textContent}return i(e,[{key:"dispose",value:function(){this.layer.texture&&this.layer.texture.classList.remove("xslider-texture-capture")}},{key:"ready",value:function(){var e=this;return new Promise(function(t,n){if(e.svg)t();else if(e.layer.texture)if(e.layer.texture.classList.contains("xslider-texture-capture"))n("in process");else{e.layer.texture.classList.add("xslider-texture-capture");var r=e.layer.texture,i=r.scrollWidth,o=r.scrollHeight;s.Inliner.resolveFonts().then(function(){return s.Inliner.inlineNode(r)}).then(function(n){e.inlinedNode=n,e.svg=u.converter.convert(e.inlinedNode,i,o),e.layer.texture.classList.remove("xslider-texture-capture"),t()})}else t()})}},{key:"loadSvg",value:function(){var e="data:image/svg+xml;charset=utf-8,"+(new XMLSerializer).serializeToString(this.svg);return o.net.loadImage(this.image,e)}},{key:"resize",value:function(e,t){var n=this;return new Promise(function(r,i){n.needsResize?(n.needsResize=!1,n.canvas.width=e,n.canvas.height=t,n.layer.texture.classList.add("xslider-texture-capture"),a.cloner.copyStyleExcludeBackground(n.layer.texture,n.inlinedNode),n.layer.texture.classList.remove("xslider-texture-capture"),n.svg=u.converter.convert(n.inlinedNode,e,t),n.loadSvg().then(function(){n.canvas.getContext("2d").drawImage(n.image,0,0,e,t),r()})):r()})}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.converter=void 0;var r=n(10);t.converter={parser:new DOMParser,convert:function(e,t,n){var i='\n\t\t<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'">\n\t\t\t<foreignObject x="0" y="0" width="100%" height="100%">\n\t\t\t\t<style>'+r.Inliner.inlinedFontString+"</style>\n\t\t\t</foreignObject>\n\t\t</svg>\n\t\t",o=this.parser.parseFromString(i,"text/xml");return o.getElementsByTagName("foreignObject")[0].appendChild(e),o}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeRenderer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=n(12),l=n(24);n(7),(t.ThreeRenderer=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e.canvas=document.createElement("canvas"),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._onUpdateTexture=function(){e.renderer.render(e.scene,e.camera)}}},{key:"setup",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this,e),e.dom.container.insertBefore(this.canvas,e.dom.view),this.camera=new THREE.PerspectiveCamera(60,1,1,1e4),this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!1,alpha:!0,canvas:this.canvas});var n=e.option.getTransition();this.mesh=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1,1,1),new THREE.RawShaderMaterial({depthTest:!1,transparent:!0,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms})),this.model=new l.SlideModel,this.model.setup(this.mesh),this.scene.add(this.model.mesh),this.model.on("updateTexture",this._onUpdateTexture)}},{key:"dispose",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.model.off("updateTexture",this._onUpdateTexture),this.model.dispose(),this.data.dom.container.removeChild(this.canvas)}},{key:"render",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e);var n=this.data.list[e.i0],r=this.data.list[e.i1];this.model.set({slide0:n,slide1:r}),this.model.uniforms.progress.value=e.progress,this.model.uniforms.time&&(this.model.uniforms.time.value=this.data.time),this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this,e);var n=this.width,r=this.height;this.renderer.setSize(n,r),this.camera.aspect=n/r,this.camera.position.z=t.CZ*r,this.camera.updateProjectionMatrix(),this.model.resize(n,r)}}]),t}(u.BaseRenderer)).CZ=1/Math.tan(30*Math.PI/180)*.5},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SlideModel=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1);n(0),t.SlideModel=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e.width=e.height=1,e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._onChangeSlide=function(t){var n=!1;switch(t.type){case"slide0":e.updateSlide(0),n=void 0!==t.value0;break;case"slide1":e.updateSlide(1),n=void 0!==t.value0&&t.value0!==e.get("slide0")}n&&t.value0.container.classList.remove("xslider-slide-active")}}},{key:"setup",value:function(e){this.mesh=e,this.geometry=this.mesh.geometry,this.material=this.mesh.material,this.uniforms=this.material.uniforms,this.on("slide0",this._onChangeSlide),this.on("slide1",this._onChangeSlide)}},{key:"dispose",value:function(){this.off("slide0",this._onChangeSlide),this.off("slide1",this._onChangeSlide);var e=this.get("slide0"),t=this.get("slide1");e.container.classList.remove("xslider-slide-active"),t.container.classList.remove("xslider-slide-active")}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.mesh.scale.set(e,t,1),this.uniforms.resolution.value.set(e,t),this.updateSlide(0),this.updateSlide(1)}},{key:"updateSlide",value:function(e){var t=this,n=this.get("slide"+e);n&&(n.container.classList.add("xslider-slide-active"),n.resize(this.width,this.height).then(function(){var r=t.uniforms["texture"+e].value;r.image=n.canvas,r.needsUpdate=!0,t.dispatch("updateTexture")}))}}]),t}(s.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SlideController=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),u=n(1),l=n(3),c=n(26),f=n(27),p=(n(7),n(13),n(28)),h=n(11);t.SlideController=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.indexer=new f.Indexer,e.renderer={default:new h.DefaultRenderer,gl:void 0},e.ui=new p.UI,e.autoplay=new c.AutoPlay,e._defineHandlers(),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._onResize=function(t){e.data.list.forEach(function(e){e.needsResize=!0}),e.renderer.default.resize(t),e.renderer.gl.resize(t)},this._onCompleteSlide=function(){l.stage.off("tick",e._onTick),e.data.option.get("touchMove")&&e.ui.on(s.TouchEvent.START,e._onChange),e.ui.on("index",e._onChange),e.autoplay.start()},this._onTick=function(t){e.data.time=t.time,e.indexer.tick(),e.renderer.default.render(e.indexer),e.ready().then(function(){e.renderer.gl.render(e.indexer)},function(e){console.log("reject ::",e)}),e.ui.pager.set({index:e.indexer.current})},this._onChange=function(t){switch(t.type){case p.UI.EVENT.PREV:e.prev();break;case p.UI.EVENT.NEXT:case c.AutoPlay.EVENT.TICK:e.next();break;case"index":e.indexer.to(t.value),e.ready().then(function(){l.stage.on("tick",e._onTick)},function(e){console.log("on index rejected : ",e)});break;case"head":e.ui.prev&&(e.ui.prev.active=!e.indexer.get("head"));break;case"tail":e.ui.next&&(e.ui.next.active=!e.indexer.get("tail"));break;case s.TouchEvent.START:l.stage.on(s.TouchEvent.MOVE,e._onChange),l.stage.on(s.TouchEvent.END,e._onChange),e.ui.off("index",e._onChange),e.indexer.down(),e.autoplay.stop(),l.stage.on("tick",e._onTick);break;case s.TouchEvent.MOVE:var n=(t.clientX-t.clientX0)/e.dom.width;e.indexer.move(-n);break;case s.TouchEvent.END:l.stage.off(s.TouchEvent.MOVE,e._onChange),l.stage.off(s.TouchEvent.END,e._onChange),e.indexer.up()}}}},{key:"setup",value:function(e,t){var n=this;this.renderer.gl=e,this.data=t,this.dom=t.dom,this.renderer.default.setup(this.data),this.renderer.gl=this.data.getRenderer(),this.renderer.gl.setup(this.data),this.ui.setup(this.data),this.data.option.loop||(this.indexer.on("head",this._onChange),this.indexer.on("tail",this._onChange)),this.indexer.setup(this.data),this.indexer.on("complete",this._onCompleteSlide),this.autoplay.on(c.AutoPlay.EVENT.TICK,this._onChange),this.autoplay.setup(this.data.option.autoplay),this.dom.on("resize",this._onResize),this.ready().then(function(){n.ui.on("index",n._onChange),n.ui.on(p.UI.EVENT.PREV,n._onChange),n.ui.on(p.UI.EVENT.NEXT,n._onChange),n.data.option.get("touchMove")&&n.ui.on(s.TouchEvent.START,n._onChange),n.autoplay.start(),l.stage.on("tick",n._onTick),n.dom._onResize()},function(e){console.log("first ready rejected : ",e)})}},{key:"ready",value:function(){var e=this.data.list[this.indexer.i0],t=this.data.list[this.indexer.i1];return Promise.all([e.ready(),t.ready()])}},{key:"prev",value:function(){this.data.option.get("touchMove")&&this.ui.off(s.TouchEvent.START,this._onChange),this.autoplay.stop(),this.indexer.prev(),this.ui.pager.set({index:this.indexer.current})}},{key:"next",value:function(){this.data.option.get("touchMove")&&this.ui.off(s.TouchEvent.START,this._onChange),this.autoplay.stop(),this.indexer.next(),this.ui.pager.set({index:this.indexer.current})}},{key:"dispose",value:function(){l.stage.off("tick",this._onTick),l.stage.off(s.TouchEvent.MOVE,this._onChange),l.stage.off(s.TouchEvent.END,this._onChange),this.ui.off("index",this._onChange),this.ui.off(p.UI.EVENT.PREV,this._onChange),this.ui.off(p.UI.EVENT.NEXT,this._onChange),this.data.option.get("touchMove")&&this.ui.off(s.TouchEvent.START,this._onChange),this.ui.dispose(),this.dom.off("resize",this._onResize),this.indexer.off("complete",this._onCompleteSlide),this.data.option.loop||(this.indexer.off("head",this._onChange),this.indexer.off("tail",this._onChange)),this.renderer.gl.dispose(),this.renderer.default.dispose()}}]),t}(u.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(3);(t.AutoPlay=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._on={tick:function(n){n.time>e.option.delay&&e.dispatch(t.EVENT.TICK)}}}},{key:"setup",value:function(e){this.option=e}},{key:"start",value:function(){this.enabled&&u.stage.on("tick",this._on.tick)}},{key:"stop",value:function(){this.enabled&&u.stage.off("tick",this._on.tick)}},{key:"enabled",get:function(){return void 0!=this.option}}]),t}(s.EventDispatcher)).EVENT={TICK:"autoplay_tick"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Indexer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=t.Indexer=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"setup",value:function(e){this.data=e,this._target=e.option.initialSlideIndex,this._v=this._target-1,this._length=e.dom.slides.length,this._state=t.STATE.DEFAULT,this.progress=0,this.set({head:void 0,tail:void 0}),!this.data.option.loop&&(this._target=this.constrain(this._target)),this.tick()}},{key:"prev",value:function(){this._target--,!this.data.option.loop&&(this._target=this.constrain(this._target))}},{key:"next",value:function(){this._target++,!this.data.option.loop&&(this._target=this.constrain(this._target))}},{key:"to",value:function(e){if(this.data.option.loop){var t=e-this.current,n=void 0,r=void 0;t>0?(n=t-this._length,r=t>-n?n:t):(n=t+this._length,r=-t>n?n:t),this._target+=r}else this._target=e}},{key:"down",value:function(){this._state=t.STATE.DOWN,this._move=0}},{key:"move",value:function(e){this._v+=e,this._move=e,!this.data.option.loop&&(this._v=this.constrain(this._v)),this._target=this._v}},{key:"up",value:function(){this._state=t.STATE.UP,!this.data.option.get("throwable","touchMove")&&(this._move=0)}},{key:"constrain",value:function(e){var t=e<0?0:this._length-1<e?this._length-1:e;return this.set({head:0==t,tail:t==this._length-1}),t}},{key:"tick",value:function(){var e=!1;switch(this._state){case t.STATE.DOWN:break;case t.STATE.UP:this._target+=this._move,!this.data.option.loop&&(this._target=this.constrain(this._target)),this._move*=.95,this._v=this._target,Math.abs(this._move)<.01&&(this._target=Math.round(this._v),this._state=t.STATE.DEFAULT);break;default:!this.data.option.loop&&(this._target=this.constrain(this._target)),this._v+=(this._target-this._v)*t.EASING,Math.abs(this._target-this._v)<.001&&(this._v=this._target,e=!0)}var n=this._v%this._length+this._length;this.progress=n%1,this._i0=Math.floor(n)%this._length,this._i1=Math.ceil(n)%this._length,e&&this.dispatch("complete")}},{key:"current",get:function(){var e=this._target%this._length+this._length;return Math.round(e)%this._length}},{key:"i0",get:function(){return this._i0}},{key:"i1",get:function(){return this._i1}}]),t}(s.EventDispatcher);u.EASING=.15,u.STATE={DEFAULT:"DEFAULT",DOWN:"DOWN",UP:"UP"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},u=n(6),l=n(13),c=n(29);(t.UI=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_defineHandlers",this).call(this),this._onPrev=function(n){n.preventDefault(),e.dispatch(t.EVENT.PREV)},this._onNext=function(n){n.preventDefault(),e.dispatch(t.EVENT.NEXT)}}},{key:"setup",value:function(e){var t=e.dom;this.set({target:t.view}),t.pager&&(this.pager=this.pager||new c.Pager,this.pager.setup(e),this.pager.on("index",this._on.bubble)),t.prev&&(this.prev=this.prev||new l.Button,this.prev.setup(t.prev),this.prev.on("click",this._onPrev)),t.next&&(this.next=this.next||new l.Button,this.next.setup(t.next),this.next.on("click",this._onNext))}},{key:"dispose",value:function(){this.pager&&(this.pager.off("index",this._on.bubble),this.pager.dispose()),this.prev&&(this.prev.off("click",this._offPrev),this.prev.dispose()),this.next&&(this.next.off("click",this._onNext),this.next.dispose())}}]),t}(u.InteractiveObject)).EVENT={PREV:"ui_prev",NEXT:"ui_next"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pager=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1);t.Pager=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._defineHandlers(),e}return o(t,e),a(t,[{key:"_defineHandlers",value:function(){var e=this;this._onClick=function(t){var n=e.list.indexOf(t.target);e.set({index:n})},this._onChangeIndex=function(t){void 0!==t.value0&&e.list[t.value0].classList.remove("xslider-active"),e.list[t.value].classList.add("xslider-active")}}},{key:"setup",value:function(e){this.container=e.dom.pager,this.list=[];for(var t=e.dom.slides.length,n=0;n<t;n++){var r=document.createElement("span");this.container.appendChild(r),r.addEventListener("click",this._onClick),this.list.push(r)}this.on("index",this._onChangeIndex),this.set({index:e.option.initialSlideIndex})}},{key:"dispose",value:function(){var e=this;this.off("index",this._onChangeIndex),this.set({index:void 0}),this.list.forEach(function(t){t.removeEventListener("click",e._onClick),e.container.removeChild(t)})}}]),t}(s.EventDispatcher)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossWarpTransition=void 0;var r=n(0);t.CrossWarpTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tfloat v = mix(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-p.x)*gradient.x+p.y*gradient.y));\n\tv = clamp(v, 0.0, 1.0);\n\n\tvec2 p0 = p;\n\tvec2 p1 = p;\n\n\tp0 -= 0.5;\n\tp0 *= (1.0 - v);\n\tp0 += 0.5;\n\n\tp1 -= 0.5;\n\tp1 *= v;\n\tp1 += 0.5;\n\n\tvec4 color0 = texture2D(texture0, p0);\n\tvec4 color1 = texture2D(texture1, p1);\n\n\tgl_FragColor = mix(color0, color1, v);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},gradient:{value:new THREE.Vector2(.5,.5)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossZoomTransition=void 0;var r=n(0);t.CrossZoomTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\n\nvoid main(void) {\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\n#define PI 3.141592653589793\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\nuniform float strength;\n\n\nfloat Linear_ease(in float begin, in float change, in float duration, in float time) {\n    return change * time / duration + begin;\n}\n\nfloat Exponential_easeInOut(in float begin, in float change, in float duration, in float time) {\n    if (time == 0.0)\n        return begin;\n    else if (time == duration)\n        return begin + change;\n    time = time / (duration / 2.0);\n    if (time < 1.0)\n        return change / 2.0 * pow(2.0, 10.0 * (time - 1.0)) + begin;\n    return change / 2.0 * (-pow(2.0, -10.0 * (time - 1.0)) + 2.0) + begin;\n}\n\nfloat Sinusoidal_easeInOut(in float begin, in float change, in float duration, in float time) {\n    return -change / 2.0 * (cos(PI * time / duration) - 1.0) + begin;\n}\n\n/* random number between 0 and 1 */\nfloat hash(in vec3 scale, in float seed) {\n    /* use the fragment position for randomness */\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvec3 crossFade(in vec2 uv, in float dissolve) {\n    return mix(texture2D(texture0, uv).rgb, texture2D(texture1, uv).rgb, dissolve);\n}\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tvec2 center = vec2(Linear_ease(0.25, 0.5, 1.0, progress), 0.5);\n\tfloat dissolve = Exponential_easeInOut(0.0, 1.0, 1.0, progress);\n\tfloat strength = Sinusoidal_easeInOut(0.0, strength, 0.5, progress);\n\tvec3 color = vec3(0.0);\n\tfloat total = 0.0;\n\tvec2 toCenter = center - p;\n\tfloat offset = hash(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n\tfor (float t = 0.0; t <= 40.0; t++) {\n\t  float percent = (t + offset) / 40.0;\n\t  float weight = 4.0 * (percent - percent * percent);\n\t  color += crossFade(p + toCenter * percent * strength, dissolve) * weight;\n\t  total += weight;\n\t  gl_FragColor = vec4(color / total, 1.0);\n\t}\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},strength:{value:1}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CubeTransition=void 0;var r=n(0);t.CubeTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec4 bgColor;\n\nuniform float floating;\nuniform float unzoom;\nuniform float perspective;\nuniform float reflection;\n\n\nvec2 project (vec2 p) {\n  return p * vec2(1.0, -1.2) + vec2(0.0, -floating/100.0);\n}\n\nbool inBounds (vec2 p) {\n  return all(lessThan(vec2(0.0), p)) && all(lessThan(p, vec2(1.0)));\n}\n\n/**\n * persp 0-1 1:\n * center 1.0:from 0.0:to\n */\nvec2 xskew (vec2 p, float persp, float center) {\n  float x = mix(p.x, 1.0-p.x, center);\n  float d = distance(center, 0.5);\n  return (\n    (vec2( x, (p.y - 0.5 * (1.0 - persp) * x) / (1.0 + (persp - 1.0) * x)) - vec2(0.5 - d, 0.0))\n    * vec2(0.5 / d * -sign(center-0.5), 1.0)\n    + vec2(center, 0.0)\n  );\n}\n\nvoid main(void) {\n\tvec2 uv = gl_FragCoord.xy /resolution.xy;\n\n\tfloat uz = unzoom * 2.0 * (0.5 - distance(0.5, progress));\n\tvec2 p = -uz * 0.5 + (1.0 + uz) * uv;\n\n\tvec2 fromP, toP;\n\n\tfromP = xskew(\n\t\tp / vec2(1.0-progress, 1.0),\n\t\tmix(1.0-progress, 1.0, perspective),\n\t\t1.0\n\t);\n\n\ttoP = xskew(\n\t\t(p - vec2(1.0-progress, 0.0)) / vec2(progress, 1.0),\n\t\t1.0 - mix(1.0-progress, 0.0, perspective),\n\t\t0.0\n\t);\n\n\tif (inBounds(fromP)) {\n\t\tgl_FragColor = texture2D(texture0, fromP);\n\t}\n\telse if (inBounds(toP)) {\n\t\tgl_FragColor = texture2D(texture1, toP);\n\t}\n\telse {\n\t\tfromP = project(fromP);\n\t\ttoP = project(toP);\n\n\t\tvec4 color0 = texture2D(texture0, fromP);\n\t\tvec4 color1 = texture2D(texture1, toP);\n\n\t\tgl_FragColor = bgColor\n\t\t\t+ float(inBounds(fromP)) * mix(bgColor, color0, reflection * mix(1.0, 0.0, fromP.y))\n\t\t\t+ float(inBounds(toP)) * mix(bgColor, color1, reflection * mix(1.0, 0.0, toP.y));\n\t}\n\n\n\n\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},bgColor:{value:new THREE.Vector4(.1,.1,.1,1)},unzoom:{value:.3},floating:{value:3},perspective:{value:.7},reflection:{value:.4}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MorphTransition=void 0;var r=n(0);t.MorphTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\nuniform float strength;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\tvec2 oa = (((c0.rg + c0.b) * 0.5) * 2.0 - 1.0);\n\tvec2 ob = (((c1.rg + c1.b) * 0.5) * 2.0 - 1.0);\n\tvec2 oc = mix(oa,ob,0.5)*strength;\n\n\t// float v = smoothstep(0.0, 1.0, progress * (1.0+fade.x+fade.y) - ((1.0-p.x)*fade.x+p.y*fade.y));\n\tfloat v = progress;\n\n\tc0 = texture2D(texture0, p + oc * v);\n\tc1 = texture2D(texture1, p - oc * (1.0 - v));\n\n\tgl_FragColor = mix(c0, c1, v);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},strength:{value:1}}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseTransition=void 0;var i,o=n(0);t.NoiseTransition=o.BaseTransition.extend({vertexShader:"\n    precision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\n\nvoid main(void) {\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n// uniform vec2 fade;\n\nuniform float dark_low, dark_high, light_low, light_high;\nuniform float brightness, contrast, saturation;\nuniform vec3 light_tint, dark_tint;\n\nuniform float rgbOffsetOpt;\nuniform float horzFuzzOpt;\nuniform float zoom;\nuniform float time;\n\nuniform float t_amount, exposure;\n\nconst vec3 lumc = vec3(0.2125, 0.7154, 0.0721);\nconst vec3 avg_lum = vec3(0.5, 0.5, 0.5);\n\n\nvec3 tint(vec3 col)\n{\n\tfloat bri = (col.x + col.y + col.z)/3.0;\n\n\tfloat v = smoothstep(dark_low, dark_high, bri);\n\tcol = mix(dark_tint * bri, col, v);\n\n\tv = smoothstep(light_low, light_high, bri);\n\tcol = mix(col, min(light_tint * col, 1.0), v);\n\n\tvec3 intensity = vec3(dot(col.rgb, lumc));\n\tvec3 sat_color = mix(intensity, col.rgb, saturation);\n\tvec3 con_color = mix(avg_lum, sat_color, contrast);\n\t\n\treturn (con_color - 1.0 + brightness) * exposure;\n}\n\n// Noise generation functions borrowed from:\n// https://github.com/ashima/webgl-noise/blob/master/src/noise2D.glsl\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n\t// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n\t// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n\t// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n\t// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n\t// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n\t// Normalise gradients implicitly by scaling m\n\t// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n\t// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvoid main(void) {\n\n\tvec2 p =  gl_FragCoord.xy/resolution.xy;\n\tvec2 p0 = p;\n\tvec2 p1 = p;\n\n\tp0 -= 0.5;\n\tp1 -= 0.5;\n\tp0 *= 1.0 - progress * zoom;\n\tp1 *= 1.0 - (1.0 - progress) * zoom;\n\tp0 += 0.5;\n\tp1 += 0.5;\n\n\tfloat v = min(progress, 1.0 - progress) * 2.0;\t//0.0-1.0\n\n\tfloat fuzzOffset = snoise(vec2(time*15.0, p.y * 20.0)) * 0.0015;\n\tfloat largeFuzzOffset = snoise(vec2(time*1.0, p.y * 1.0)) * (0.003 + v * 0.01);\n\tfloat f_xoff = (fuzzOffset + largeFuzzOffset) * horzFuzzOpt * progress;\n    float b_xoff = (fuzzOffset + largeFuzzOffset) * horzFuzzOpt * (1.0 - progress);\n    \n    // float rgbOffset = rgbOffsetOpt * fuzzOffset * 300.0;\n    // float rgbOffset = rgbOffsetOpt;\n    float rgbOffset = snoise(vec2(time*15.0, 1.0)) * rgbOffsetOpt;\n\n\tvec3 f_col = vec3(\n\t\ttexture2D(texture0,\tvec2(p0.x + f_xoff -0.01 * rgbOffset * progress, p0.y)).r,\n\t\ttexture2D(texture0, vec2(p0.x + f_xoff,\t  p0.y)).g,\n\t\ttexture2D(texture0, vec2(p0.x + f_xoff +0.01 * rgbOffset * progress, p0.y)).b\n\t);\n\n\tvec3 b_col = vec3(\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff -0.01 * rgbOffset * (1.0 - progress), p1.y)).r,\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff,\t  p1.y)).g,\n\t\ttexture2D(texture1, vec2(p1.x + b_xoff +0.01 * rgbOffset * (1.0 - progress), p1.y)).b\n\t);\n\n\tvec3 ff_col = f_col;\n\tff_col = tint(ff_col);\n\tff_col = mix(f_col, ff_col, t_amount * progress);\n\n\tvec3 bb_col = b_col;\n\tbb_col = tint(bb_col);\n\tbb_col = mix(b_col, bb_col, t_amount * (1.0 - progress));\n\n\tgl_FragColor = vec4(mix(ff_col, bb_col, progress), 1.0);\n}\n",uniforms:(i={texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},time:{value:0},zoom:{value:.3},dark_low:{value:100},dark_high:{value:200}},r(i,"dark_low",{value:200}),r(i,"dark_high",{value:255}),r(i,"contrast",{value:1}),r(i,"brightness",{value:1}),r(i,"saturation",{value:100}),r(i,"light_tint",{value:new THREE.Vector3(.5,.5,.5)}),r(i,"dark_tint",{value:new THREE.Vector3(.2,.2,.2)}),r(i,"t_amount",{value:.5}),r(i,"exposure",{value:30}),r(i,"horzFuzzOpt",{value:10}),r(i,"rgbOffsetOpt",{value:20}),i)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixelateTransition=void 0;var r=n(0);t.PixelateTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\n\n#define N 10.0\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution;\n\tfloat aspect = resolution.x / resolution.y;\n\tfloat v = min(progress, 1.0 - progress) * 2.0;\t//0.0-1.0\n\tv = floor(v * 30.0) / 30.0;\n\t\n\tvec2 steps = vec2(aspect, 1.0) * N / v;\n\n\tp -= 0.5;\n\n\tsteps = min(steps, resolution.xy);\n\tp = (floor(p * steps) + 0.5) / steps;\n\n\tp += 0.5;\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\tgl_FragColor = mix(c0, c1, progress);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixelateWipeTransition=void 0;var r=n(0);t.PixelateWipeTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n\nprecision highp float;\n\n#define N 10.0\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution;\n\tfloat aspect = resolution.x / resolution.y;\n\n\tfloat v = mix(0.0, 1.0, progress * (1.0+gradient.x+gradient.y) - ((1.0-p.x)*gradient.x+p.y*gradient.y));\n\tv = clamp(v, 0.0, 1.0);\n\tv = floor(v * 16.0) / 16.0;\n\n\tp -= 0.5;\n\n\tfloat pv = min(v, 1.0 - v) * 2.0;\t//0.0-1.0\n\tvec2 steps = vec2(aspect, 1.0) * N / pv;\n\tsteps = min(steps, resolution.xy);\n\tp = (floor(p * steps) + 0.5) / steps;\n\n\tp += 0.5;\n\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\n\t// v = step(0.5, v);\n\n\tgl_FragColor = mix(c0, c1, v);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},gradient:{value:new THREE.Vector2(.5,0)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTransition=void 0;var r=n(0);t.TestTransition=r.BaseTransition.extend({vertexShader:"\nprecision highp float;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main(void) {\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float progress;\nuniform vec2 resolution;\nuniform vec2 gradient;\n\nvoid main(void) {\n\tvec2 p = gl_FragCoord.xy /resolution.xy;\n\tvec4 c0 = texture2D(texture0, p);\n\tvec4 c1 = texture2D(texture1, p);\n\tgl_FragColor = mix(c0, c1, progress);\n}\n",uniforms:{texture0:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},texture1:{value:new THREE.Texture(null,null,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.LinearFilter,THREE.LinearFilter)},progress:{value:0},resolution:{value:new THREE.Vector2(0,0)},gradient:{value:new THREE.Vector2(.5,.5)}}})}]);